import{j as Ce,r as u,c as ne,y as $e,o as je,b as l,a as Be,w as Pe,d as a,p as T,v as D,B as H,u as oe,x as R,e as d,F as M,h as V,q as k,z as Te,n as L,t as n,f as U,A as le}from"./index-Cs9e03Zl.js";import{a as I,S as c}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Ie}from"./AdminLayout-Dh2wtnyM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"py-2 space-y-2"},qe={class:"flex flex-col space-y-2 md:flex-row md:space-x-3 md:space-y-0 items-end"},ze={class:"flex-1 w-full relative"},Ae={class:"flex space-x-2"},De=["disabled"],Re={class:"flex-1 w-full relative"},Me=["onKeydown","disabled"],Ve={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg z-50 max-h-200 overflow-y-auto"},Ke=["onClick"],Ne={class:"font-medium truncate"},Ee={class:"text-xs text-gray-500 dark:text-gray-300"},He={key:0,disabled:""},Le=["value"],Ue={key:0,class:"p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded"},Fe={class:"flex justify-between items-center text-sm"},Ge={key:1,class:"space-y-1 pt-1"},Oe={class:"text-xs font-bold text-gray-900 dark:text-white flex items-center gap-1"},Je={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2"},Ye={class:"text-xs text-yellow-800 dark:text-yellow-200 truncate font-semibold"},Qe={class:"text-[10px] text-gray-600 dark:text-gray-400"},We={class:"flex justify-end gap-1 mt-1"},Xe=["onClick"],Ze=["onClick"],et={class:"bg-white dark:bg-gray-800 rounded shadow border border-gray-200 dark:border-gray-700 overflow-x-auto"},tt={class:"md:hidden divide-y divide-gray-100 dark:divide-gray-700"},at={key:0,class:"px-3 py-6 text-center text-xs text-gray-400 dark:text-gray-500"},st={class:"flex justify-between items-center"},rt={class:"font-semibold text-sm text-gray-900 dark:text-white truncate"},nt=["onClick"],ot={class:"grid grid-cols-3 gap-1 text-xs"},lt={class:"col-span-1 text-gray-500"},dt={class:"col-span-2 text-right"},it={class:"flex justify-between items-center pt-1 border-t border-gray-100 dark:border-gray-700/50"},ut={class:"flex items-center space-x-1"},ct=["onUpdate:modelValue","onChange"],gt={class:"font-bold text-sm text-blue-600 dark:text-blue-400"},pt={class:"min-w-full hidden md:table"},bt={class:"divide-y divide-gray-100 dark:divide-gray-700"},yt={key:0},vt={class:"px-3 py-1.5 text-xs text-gray-900 dark:text-white"},xt={class:"px-3 py-1.5"},ht={class:"font-medium text-sm text-gray-900 dark:text-white"},ft={class:"px-3 py-1.5 text-center"},mt=["onUpdate:modelValue","onChange"],kt={class:"px-3 py-1.5 text-right text-xs text-gray-700 dark:text-gray-200"},_t={class:"px-3 py-1.5 text-right font-semibold text-sm text-gray-900 dark:text-white"},wt={class:"px-3 py-1.5 text-center"},Ct=["onClick"],$t={class:"px-3 py-2 flex justify-between items-center bg-gray-50 dark:bg-gray-700/30 border-t border-gray-200 dark:border-gray-600 font-bold text-base text-gray-900 dark:text-white"},jt={class:"text-blue-600 dark:text-blue-400"},Bt={class:"flex flex-col md:flex-row gap-3 items-center pt-1"},Pt={class:"w-full md:w-1/2"},Tt={class:"w-full md:w-1/2"},It={class:"text-sm font-medium"},St={class:"text-base font-bold"},qt={key:1,class:"h-10 flex items-center px-3 text-xs text-gray-500 italic bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700"},zt={class:"flex gap-2 pt-2"},At=["disabled"],Dt=["disabled"],Rt={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},de="pendingTransactions",Ht=Ce({__name:"PenjualanReguler",setup(Mt){const _="https://alentest.my.id/pos",f=u(0),Q=localStorage.getItem("role_name"),ie=new Audio("/barcode.mp3"),F=u([]),G=u(!1),S=u(!1),g=u(""),x=u(0),q=u(""),K=u(null),o=u([]),h=u([]),w=u(null),N=u(null),E=u(""),v=u([]),C=u(!1),y=u(-1),$=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),j=ne(()=>o.value.reduce((e,t)=>e+t.qty*t.harga_jual_biasa,0)),z=ne(()=>{let e=x.value-j.value;return e>=0&&f.value>0&&(e=e-f.value),e}),p=e=>e==null||isNaN(e)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),ue=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),ce=async()=>{try{const e=await I.get(`${_}/user/my/data`,{headers:$()});e.data.success&&(N.value={full_name:e.data.data.full_name,role_name:e.data.data.role_name,toko:{id:e.data.data.toko.id,nama_toko:e.data.data.toko.nama_toko,alamat:e.data.data.toko.alamat}})}catch(e){console.error("Gagal mengambil data kasir:",e)}},W=async e=>{try{const t=await I.get(`${_}/pelanggan/${e}`,{headers:$()});t.data.success&&t.data.data&&(f.value=t.data.data.hutang||0)}catch(t){console.error("Gagal mengambil hutang pelanggan:",t),f.value=0}};$e(g,async e=>{e?await W(e):f.value=0});const ge=async()=>{G.value=!0;try{const e=await I.get(`${_}/pelanggan`,{headers:$()});e.data.success&&(F.value=e.data.data)}catch(e){console.error("Gagal mengambil data pelanggan:",e)}finally{G.value=!1}},pe=async e=>{if(y.value=-1,!e.trim()){v.value=[],C.value=!1;return}try{const t=await I.get(`${_}/produk`,{params:{search:e},headers:$()});t.data.success&&t.data.data.data&&(v.value=t.data.data.data.map(s=>({barcode:s.barcode,qty:1,nama_produk:s.nama_produk,harga_jual_biasa:parseFloat(s.harga_jual_biasa)})),C.value=!0)}catch(t){console.error("Error searching products:",t),v.value=[]}},X=e=>{!C.value||v.value.length===0||(e==="down"?y.value<v.value.length-1?y.value++:y.value=0:e==="up"&&(y.value>0?y.value--:y.value=v.value.length-1))},be=()=>{C.value&&y.value!==-1&&te(v.value[y.value])},O=()=>{g.value="",x.value=0,o.value=[],q.value="",w.value=null,le(()=>{var e;(e=K.value)==null||e.focus()})},ye=(e,t)=>{const s=o.value.find(r=>r.barcode===e.barcode);s?(s.qty+=t,o.value=[s,...o.value.filter(r=>r.barcode!==e.barcode)]):o.value.unshift({barcode:e.barcode,qty:t,nama_produk:e.nama_produk,harga_jual_biasa:parseFloat(e.harga_jual_biasa)})},Z=async e=>{const{value:t,isConfirmed:s}=await c.fire({title:"Masukkan Jumlah",html:`Produk: <strong>${e.nama_produk}</strong><br>Harga: ${p(e.harga_jual_biasa)}`,input:"number",inputValue:1,inputAttributes:{min:"1",step:"1"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Masuk Keranjang",cancelButtonText:"Batal",didOpen:()=>{const r=c.getInput();r==null||r.focus(),r==null||r.select(),r==null||r.addEventListener("keydown",i=>{i.key==="Enter"&&(i.preventDefault(),c.clickConfirm())})}});if(s&&t){const r=parseInt(t);if(r>0)return ye(e,r),!0}return!1},ee=(e,t)=>{const s=o.value.find(r=>r.barcode===e);s&&(t<=0||isNaN(t)?J(e):s.qty=t)},J=e=>{o.value=o.value.filter(t=>t.barcode!==e)},ve=async e=>{try{const t=await I.post(`${_}/transaksi/scan`,{barcode:e},{headers:$()});return t.data.success&&t.data.data?t.data.data:null}catch(t){return console.error("Lookup product error:",t),null}},te=async e=>{await Z(e)&&(E.value="",v.value=[],C.value=!1,y.value=-1)},xe=async()=>{const e=q.value.trim();if(!e)return;const t=await ve(e);if(t){try{ie.play()}catch(r){console.warn("Gagal memutar audio",r)}await Z(t)&&c.fire({icon:"success",title:"Ditambahkan",text:`${t.nama_produk}`,timer:1e3,showConfirmButton:!1,toast:!0,position:"top-end"})}else c.fire("Tidak Ditemukan",`Barcode: ${e}`,"error");q.value="",le(()=>{var s;(s=K.value)==null||s.focus()})},ae=()=>{try{localStorage.setItem(de,JSON.stringify(h.value))}catch(e){console.error("Error saving pending transactions:",e)}},he=()=>{try{const e=localStorage.getItem(de);h.value=e?JSON.parse(e):[]}catch(e){console.error("Error loading pending transactions:",e),h.value=[]}},fe=async()=>{if(o.value.length===0){c.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!g.value){c.fire("Peringatan","Pilih pelanggan dahulu.","warning");return}const e=F.value.find(r=>r.id===g.value),t=e?e.nama_pelanggan:"Pelanggan",s={id:Date.now(),pelanggan_id:g.value,nama_pelanggan:t,items:[...o.value],tanggal_simpan:new Date().toLocaleString("id-ID"),total:j.value};h.value.push(s),ae(),c.fire({title:"Tersimpan (Pending)",icon:"success",timer:1e3,showConfirmButton:!1,toast:!0,position:"top-end"}),O()},me=e=>{O(),g.value=e.pelanggan_id,o.value=e.items,x.value=0,w.value=e.id,Y(w.value,!1)},Y=(e,t=!0)=>{h.value=h.value.filter(s=>s.id!==e),ae()},ke=(e,t,s,r,i,b)=>{const B=e.total_bayar,A=e.total_harga,se=e.total_kembalian,re=e.sisa_hutang,P=m=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(m);return`
        <div style="width: 280px; font-family: monospace; font-size: 12px; padding: 10px; text-align: center;">
            <div style="margin-bottom: 10px;">
                <div style="font-weight: bold; font-size: 14px; margin-bottom: 5px;">${i.toUpperCase()}</div>
                <div style="font-size: 11px; line-height: 1.4;">
                    ${b.replace(/\n/g,"<br>")}
                </div>
            </div>

            <div style="border-top: 1px dashed #000; border-bottom: 1px dashed #000; padding: 5px 0; margin: 5px 0;">
                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                    <span>ID: ${e.id.substring(0,8)}</span>
                    <span>${ue(e.createdAt)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 2px;">
                    <span>Kasir: ${r}</span>
                    <span>Plg: ${t}</span>
                </div>
            </div>

            <div style="border-bottom: 1px dashed #000; padding-bottom: 4px;">
                ${s.map(m=>`
                    <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 4px;">
                        <span style="flex: 1; text-align: left;">${m.nama_produk}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 11px;">
                        <span style="width: 30px; text-align: right;">${m.qty}x</span>
                        <span style="width: 60px; text-align: right;">${P(m.harga_jual_biasa)}</span>
                        <span style="flex: 1; text-align: right;">${P(m.qty*m.harga_jual_biasa)}</span>
                    </div>
                `).join("")}
            </div>

            <div style="margin-top: 8px;">
                <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 12px;">
                    <span>TOTAL:</span>
                    <span>Rp ${P(A)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 2px;">
                    <span>Tunai:</span>
                    <span>Rp ${P(B)}</span>
                </div>
                ${se>0?`
                    <div style="display: flex; justify-content: space-between; font-size: 11px;">
                        <span>Kembali:</span>
                        <span>Rp ${P(se)}</span>
                    </div>
                `:""}
                ${re>0?`
                    <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; margin-top: 4px;">
                        <span>SISA HUTANG:</span>
                        <span>Rp ${P(re)}</span>
                    </div>
                `:""}
            </div>

            <div style="margin-top: 15px; font-size: 10px; text-align: center;">
                -- Terima Kasih --
            </div>
        </div>
    `},_e=(e,t,s,r,i,b)=>{const B=ke(e,t,s,r,i,b),A=window.open("","","width=350,height=600,scrollbars=yes");A&&(A.document.write(`
        <html>
            <head>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { font-family: monospace; font-size: 12px; }
                </style>
            </head>
            <body onload="window.print(); setTimeout(() => window.close(), 500);">
                ${B}
            </body>
        </html>
    `),A.document.close())},we=async()=>{var r,i;if(!g.value){c.fire("Error","Pilih pelanggan.","error");return}if(o.value.length===0){c.fire("Error","Keranjang kosong.","error");return}if(!(await c.fire({title:"Proses Transaksi?",html:`Total: <b>${p(j.value)}</b><br>Bayar: <b>${p(x.value)}</b>`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal"})).isConfirmed||z.value<0&&!(await c.fire({title:"Kurang Bayar (Hutang)",text:`Kurang: ${p(Math.abs(z.value))}. Lanjut?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hutang"})).isConfirmed)return;const t=[...o.value],s={pelanggan_id:g.value,pembayaran:x.value,items:o.value.map(b=>({barcode:b.barcode,qty:b.qty}))};S.value=!0;try{const b=await I.post(`${_}/transaksi/create/reguler`,s,{headers:$()});if(b.data.success){const B=b.data.data.transaksi;_e(B,b.data.data.pelanggan.nama_pelanggan,t,N.value.full_name,N.value.toko.nama_toko,N.value.toko.alamat),c.fire({icon:"success",title:"Berhasil",text:`Kembalian: ${p(B.total_kembalian)}`,timer:2e3,showConfirmButton:!1}),w.value!==null&&Y(w.value,!1),await W(g.value),O()}else c.fire("Gagal",b.data.message,"error")}catch(b){c.fire("Error",((i=(r=b.response)==null?void 0:r.data)==null?void 0:i.message)||"Server Error","error")}finally{S.value=!1}};return je(async()=>{var e;await ce(),await ge(),he(),(e=K.value)==null||e.focus()}),(e,t)=>(l(),Be(Ie,null,{default:Pe(()=>[a("div",Se,[t[19]||(t[19]=a("div",{class:"border-b border-gray-200 dark:border-gray-800 pb-2"},[a("p",{class:"text-lg font-bold dark:text-gray-50 tracking-tight uppercase text-blue-500"}," Transaksi Penjualan Eceran ")],-1)),a("div",qe,[a("div",ze,[a("div",Ae,[T(a("input",{ref_key:"barcodeInputRef",ref:K,"onUpdate:modelValue":t[0]||(t[0]=s=>q.value=s),type:"text",placeholder:"Scan/ketik barcode...",onKeyup:H(xe,["enter"]),disabled:oe(Q)!=="admin",class:"flex-1 h-9 px-3 rounded border-2 border-blue-400 dark:border-blue-600 bg-white dark:bg-gray-800 text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 disabled:bg-gray-200 disabled:text-gray-500 dark:disabled:bg-gray-700 dark:disabled:text-gray-400"},null,40,De),[[D,q.value]])])]),a("div",Re,[T(a("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>E.value=s),type:"text",placeholder:"Cari nama produk (Panah Bawah utk pilih)...",onInput:t[2]||(t[2]=s=>pe(E.value)),onKeydown:[t[3]||(t[3]=H(R(s=>X("down"),["prevent"]),["down"])),t[4]||(t[4]=H(R(s=>X("up"),["prevent"]),["up"])),H(R(be,["prevent"]),["enter"])],disabled:oe(Q)!=="admin",class:"w-full h-9 px-3 rounded border-2 border-blue-400 dark:border-blue-600 bg-white dark:bg-gray-800 text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 disabled:bg-gray-200 disabled:text-gray-500 dark:disabled:bg-gray-700 dark:disabled:text-gray-400"},null,40,Me),[[D,E.value]]),C.value&&v.value.length>0?(l(),d("div",Ve,[(l(!0),d(M,null,V(v.value,(s,r)=>(l(),d("div",{key:s.barcode,onClick:i=>te(s),class:L(["p-2 cursor-pointer border-b dark:border-gray-700 last:border-b-0 text-sm",r===y.value?"bg-yellow-200 dark:bg-yellow-700 text-black dark:text-white":"hover:bg-green-50 dark:hover:bg-green-900/30 text-gray-900 dark:text-white"])},[a("div",Ne,n(s.nama_produk),1),a("div",Ee,n(s.barcode)+" - "+n(p(s.harga_jual_biasa)),1)],10,Ke))),128))])):k("",!0)]),T(a("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>g.value=s),required:"",class:"flex-1 w-full md:w-auto h-9 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-2 text-sm text-gray-900 dark:text-white focus:ring-1 focus:ring-blue-500"},[t[7]||(t[7]=a("option",{value:"",disabled:""},"Pilih Pelanggan",-1)),G.value?(l(),d("option",He,"Memuat...")):k("",!0),(l(!0),d(M,null,V(F.value,s=>(l(),d("option",{key:s.id,value:s.id},n(s.nama_pelanggan),9,Le))),128))],512),[[Te,g.value]])]),g.value?(l(),d("div",Ue,[a("div",Fe,[t[8]||(t[8]=a("span",{class:"font-medium text-blue-700 dark:text-blue-300"},"Hutang Pelanggan",-1)),a("span",{class:L(["font-bold text-base",f.value>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"])},n(p(f.value)),3)])])):k("",!0),h.value.length>0?(l(),d("div",Ge,[a("p",Oe,[t[9]||(t[9]=a("svg",{class:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 9.586V6z","clip-rule":"evenodd"})],-1)),U(" Pending ("+n(h.value.length)+") ",1)]),a("div",Je,[(l(!0),d(M,null,V(h.value,s=>(l(),d("div",{key:s.id,class:L(["p-2 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded shadow-sm flex flex-col justify-between",{"ring-1 ring-blue-500":s.id===w.value}])},[a("div",null,[a("p",Ye,n(s.nama_pelanggan),1),a("p",Qe,n(p(s.total)),1)]),a("div",We,[a("button",{onClick:r=>me(s),class:"text-[10px] bg-blue-500 hover:bg-blue-600 text-white px-1.5 py-0.5 rounded"}," Muat ",8,Xe),a("button",{onClick:r=>Y(s.id),class:"text-[10px] bg-red-500 hover:bg-red-600 text-white px-1.5 py-0.5 rounded"}," Hapus ",8,Ze)])],2))),128))])])):k("",!0),t[20]||(t[20]=a("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1)),a("div",et,[a("div",tt,[o.value.length===0?(l(),d("div",at," Belum ada produk. ")):k("",!0),(l(!0),d(M,null,V(o.value,(s,r)=>(l(),d("div",{key:s.barcode,class:"p-2 dark:hover:bg-gray-700/50 space-y-1"},[a("div",st,[a("div",rt,n(r+1)+". "+n(s.nama_produk),1),a("button",{type:"button",onClick:i=>J(s.barcode),class:"text-red-500 p-1"},t[10]||(t[10]=[a("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,nt)]),a("div",ot,[a("div",lt,"Barcode: "+n(s.barcode),1),a("div",dt,n(p(s.harga_jual_biasa)),1)]),a("div",it,[a("div",ut,[t[11]||(t[11]=a("span",{class:"text-xs text-gray-700 dark:text-gray-300"},"Qty:",-1)),T(a("input",{"onUpdate:modelValue":i=>s.qty=i,type:"number",min:"1",onChange:i=>ee(s.barcode,s.qty),class:"w-12 text-center border rounded px-1 py-0.5 text-xs bg-white dark:bg-gray-700"},null,40,ct),[[D,s.qty,void 0,{number:!0}]])]),a("div",gt,n(p(s.qty*s.harga_jual_biasa)),1)])]))),128))]),a("table",pt,[t[14]||(t[14]=a("thead",{class:"bg-gray-50 dark:bg-gray-700/30 text-gray-600 dark:text-gray-300 text-xs uppercase"},[a("tr",null,[a("th",{class:"px-3 py-2 text-left w-10"},"No"),a("th",{class:"px-3 py-2 text-left"},"Produk"),a("th",{class:"px-3 py-2 text-center w-24"},"Qty"),a("th",{class:"px-3 py-2 text-right w-32"},"Harga"),a("th",{class:"px-3 py-2 text-right w-32"},"Subtotal"),a("th",{class:"px-3 py-2 text-center w-10"})])],-1)),a("tbody",bt,[o.value.length===0?(l(),d("tr",yt,t[12]||(t[12]=[a("td",{colspan:"6",class:"px-3 py-6 text-center text-sm text-gray-400"},"Belum ada produk.",-1)]))):k("",!0),(l(!0),d(M,null,V(o.value,(s,r)=>(l(),d("tr",{key:s.barcode,class:"dark:hover:bg-gray-700/50"},[a("td",vt,n(r+1),1),a("td",xt,[a("div",ht,n(s.nama_produk),1)]),a("td",ft,[T(a("input",{"onUpdate:modelValue":i=>s.qty=i,type:"number",min:"1",onChange:i=>ee(s.barcode,s.qty),class:"w-14 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded px-1 py-1 text-xs bg-white dark:bg-gray-700"},null,40,mt),[[D,s.qty,void 0,{number:!0}]])]),a("td",kt,n(p(s.harga_jual_biasa)),1),a("td",_t,n(p(s.qty*s.harga_jual_biasa)),1),a("td",wt,[a("button",{type:"button",onClick:i=>J(s.barcode),class:"text-red-500 hover:text-red-700 p-1"},t[13]||(t[13]=[a("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ct)])]))),128))])]),a("div",$t,[t[15]||(t[15]=a("span",null,"Total Belanja",-1)),a("span",jt,n(p(j.value)),1)])]),a("div",Bt,[a("div",Pt,[t[16]||(t[16]=a("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[U("Jumlah Bayar "),a("span",{class:"text-red-500"},"*")],-1)),T(a("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>x.value=s),type:"number",min:"0",required:"",placeholder:"Rp 0",class:"w-full h-10 px-3 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-base font-bold text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500"},null,512),[[D,x.value,void 0,{number:!0}]])]),a("div",Tt,[x.value>0?(l(),d("div",{key:0,class:L(["h-10 flex items-center justify-between px-3 rounded",z.value>=0?"bg-green-50 dark:bg-green-900/20 text-green-700":"bg-red-50 dark:bg-red-900/20 text-red-700"])},[a("span",It,n(z.value>=0?"Kembalian":"Kurang Bayar"),1),a("span",St,n(p(Math.abs(z.value))),1)],2)):(l(),d("div",qt," Input pembayaran untuk lihat kembalian "))])]),a("div",zt,[a("button",{type:"button",onClick:R(fe,["prevent"]),disabled:o.value.length===0||!g.value,class:"flex-1 h-10 bg-red-500 hover:bg-red-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white text-sm font-medium rounded flex items-center justify-center gap-2 transition"},t[17]||(t[17]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),U(" Simpan (Pending) ")]),8,At),a("button",{type:"submit",onClick:R(we,["prevent"]),disabled:S.value||j.value===0||!g.value||x.value<j.value,class:"flex-[2] h-10 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white text-sm font-bold rounded flex items-center justify-center gap-2 shadow transition hover:scale-[1.01]"},[S.value?(l(),d("svg",Rt,t[18]||(t[18]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),U(" "+n(S.value?"Proses":"Proses Transaksi"),1)],8,Dt)])])]),_:1}))}});export{Ht as default};
