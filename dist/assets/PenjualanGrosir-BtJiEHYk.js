import{j as It,r as o,c as F,y as zt,o as Dt,b as c,a as St,w as At,d as a,p as W,v as nt,u as Nt,e as g,F as V,h as U,q as z,z as Mt,n as D,t as l,f as X,x as st,A as ot}from"./index-Bx8aesxF.js";import{a as q,S as i}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Et}from"./AdminLayout-OwvOUXMA.js";import{_ as Ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";const qt={class:"page-container min-h-screen py-2 space-y-2"},Kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Rt={class:"lg:col-span-2 relative"},Lt=["disabled"],Ft={key:0,class:"dropdown-container absolute top-full left-0 right-0 mt-2 rounded-lg shadow-xl z-10 max-h-200 overflow-y-auto"},Vt=["onClick"],Ut={style:{"font-size":"12px"},class:"dropdown-text"},Gt={key:0,disabled:""},Ot=["value"],Yt={key:0,class:"card-section p-4 rounded-lg border"},Jt={class:"flex justify-between items-center"},Qt={key:1,class:"space-y-3"},Wt={class:"flex items-center gap-2"},Xt={class:"text-sm font-bold text-title"},Zt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},te={class:"mb-3"},ee={class:"text-sm font-semibold text-title"},ae={class:"text-lg font-bold text-warning mt-1"},ne={class:"text-xs text-muted mt-2"},se={class:"flex gap-2 justify-end"},oe=["onClick"],le=["onClick"],ie={class:"card-section rounded-lg shadow-sm border overflow-hidden"},re={class:"overflow-x-auto"},de={class:"w-full"},ue={class:"divide-y divide-border"},ce={key:0},pe={class:"px-6 py-1 text-sm text-body font-medium"},ge={class:"px-6 py-1"},me={style:{"font-size":"12px"},class:"text-body leading-tight"},fe={class:"px-6 py-1 text-center"},ve=["onUpdate:modelValue","onChange"],be={class:"px-6 py-1 text-right text-sm text-muted-dark"},xe={class:"px-6 py-1 text-right text-sm font-semibold text-body"},he={class:"px-6 py-1 text-center"},ye=["onClick"],ke={class:"px-6 py-2 bg-footer border-t flex justify-between items-center"},_e={class:"text-xl text-primary"},we={class:"space-y-4 mt-4"},Te={class:"relative"},je=["value"],Be={class:"card-section p-5 border rounded-lg space-y-3"},Pe={class:"flex justify-between text-sm"},Ce={class:"flex justify-between text-sm"},$e={class:"font-semibold text-body"},Ie={class:"flex justify-between text-sm border-t pt-3 border-divider"},ze={class:"font-semibold text-body"},De={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Se=["disabled"],Ae=["disabled"],Ne={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},lt="pendingTransactions",Me=It({__name:"PenjualanGrosir",setup(Ee){const S="https://alentest.my.id/pos",k=o(0),it=localStorage.getItem("role_name"),f=o(-1),G=o([]),O=o(!1),A=o(!1),p=o(""),m=o(0),rt=o(""),K=o(null),r=o([]),x=o([]),T=o(null),j=o(null),R=o(""),h=o([]),B=o(!1),N=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),dt=F(()=>{var t;return((t=j.value)==null?void 0:t.role_name)==="superadmin"});o([]);const ut=o("");o(!1);const L=o(""),Y=F(()=>{const t=Number(k.value)||0,e=Number(_.value)||0;return t+e}),ct=t=>{/\d/.test(t.key)&&t.preventDefault()},pt=t=>{const e=t.replace(/\D/g,""),n=parseInt(e)||0;m.value=n,e===""?L.value="":L.value=new Intl.NumberFormat("id-ID").format(n)},gt=t=>{const e=t.target;pt(e.value)},mt=t=>{const e=t.target;m.value>0&&(e.value=m.value.toString())},ft=t=>{const e=t.target;m.value>0&&(e.value=L.value)},vt=async t=>{if(!t.trim()){h.value=[],B.value=!1;return}try{const e=await q.get(`${S}/produk`,{params:{search:t},headers:N()});e.data.success&&e.data.data.data&&(h.value=e.data.data.data.map(n=>({barcode:n.barcode,qty:1,nama_produk:n.nama_produk,harga_jual_ritel:parseFloat(n.harga_jual_ritel)})),B.value=!0,f.value=-1)}catch(e){console.error("Error searching products:",e),h.value=[]}},bt=t=>{if(!(!B.value||h.value.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),f.value=Math.min(f.value+1,h.value.length-1);break;case"ArrowUp":t.preventDefault(),f.value=Math.max(f.value-1,-1);break;case"Enter":t.preventDefault(),f.value>=0&&Z(h.value[f.value]);break;case"Escape":t.preventDefault(),B.value=!1,f.value=-1;break}},Z=async t=>{const e=await $t(t);e!==null&&(kt(t,e),i.fire({icon:"success",title:"Berhasil",text:`${e} ${t.nama_produk} ditambahkan`,timer:1500,showConfirmButton:!1})),R.value="",h.value=[],B.value=!1,f.value=-1,ot(()=>{var n;(n=K.value)==null||n.focus()})},d=t=>t==null||isNaN(t)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),xt=t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=F(()=>r.value.reduce((t,e)=>t+e.qty*e.harga_jual_ritel,0)),P=F(()=>{const t=Number(m.value)||0,e=Number(Y.value)||0;return t-e}),ht=async()=>{try{const t=await q.get(`${S}/user/my/data`,{headers:N()});t.data.success&&(j.value={full_name:t.data.data.full_name,role_name:t.data.data.role_name,toko:{id:t.data.data.toko.id,nama_toko:t.data.data.toko.nama_toko,alamat:t.data.data.toko.alamat}})}catch(t){console.error("Gagal mengambil data kasir:",t)}},tt=async t=>{try{const e=await q.get(`${S}/pelanggan/${t}`,{headers:N()});e.data.success&&e.data.data&&(k.value=Number(e.data.data.hutang)||0)}catch(e){console.error("Gagal mengambil hutang pelanggan:",e),k.value=0}};zt(p,async t=>{t?await tt(t):k.value=0});const yt=async()=>{O.value=!0;try{const t=await q.get(`${S}/pelanggan`,{headers:N()});t.data.success&&(G.value=t.data.data)}catch(t){console.error("Gagal mengambil data pelanggan:",t)}finally{O.value=!1}},J=()=>{p.value="",m.value=0,r.value=[],rt.value="",T.value=null,ot(()=>{var t;(t=K.value)==null||t.focus()})},kt=(t,e=1)=>{const n=r.value.find(s=>s.barcode===t.barcode);n?(n.qty+=e,r.value=[n,...r.value.filter(s=>s.barcode!==t.barcode)]):r.value.unshift({barcode:t.barcode,qty:e,nama_produk:t.nama_produk,harga_jual_ritel:parseFloat(t.harga_jual_ritel)})},_t=(t,e)=>{const n=r.value.find(s=>s.barcode===t);n&&(e<=0||isNaN(e)?et(t):n.qty=e)},et=t=>{r.value=r.value.filter(e=>e.barcode!==t)},at=()=>{try{localStorage.setItem(lt,JSON.stringify(x.value))}catch(t){console.error("Error saving pending transactions:",t)}},wt=()=>{try{const t=localStorage.getItem(lt);x.value=t?JSON.parse(t):[]}catch(t){console.error("Error loading pending transactions:",t),x.value=[]}},Tt=async()=>{if(r.value.length===0){i.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!p.value){i.fire("Peringatan","Pelanggan harus dipilih untuk menyimpan transaksi pending.","warning");return}const t=G.value.find(s=>s.id===p.value),e=t?t.nama_pelanggan:"Pelanggan Tidak Dikenal",n={id:Date.now(),pelanggan_id:p.value,nama_pelanggan:e,items:[...r.value],tanggal_simpan:new Date().toLocaleString("id-ID"),total:_.value};x.value.push(n),at(),i.fire("Berhasil","Transaksi telah disimpan sebagai pending.","success"),J()},jt=t=>{J(),p.value=t.pelanggan_id,r.value=t.items,m.value=0,T.value=t.id,i.fire("Dimuat",`Transaksi untuk ${t.nama_pelanggan} telah dimuat ke keranjang.`,"info"),Q(T.value,!1)},Q=(t,e=!0)=>{x.value=x.value.filter(n=>n.id!==t),at(),e&&i.fire("Berhasil","Transaksi pending telah dihapus.","success")},Bt=(t,e,n,s,v,C)=>{const $=t.total_bayar,u=t.total_harga,w=t.total_kembalian,I=t.sisa_hutang,y=b=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(b);return`
        <div style="width: 280px; font-family: monospace; font-size: 12px; padding: 10px; text-align: center;">
            <div style="margin-bottom: 10px;">
                <div style="font-weight: bold; font-size: 14px; margin-bottom: 5px;">${v.toUpperCase()}</div>
                <div style="font-size: 11px; line-height: 1.4;">
                    ${C.replace(/\n/g,"<br>")}
                </div>
            </div>

            <div style="border-top: 2px dashed #000; border-bottom: 2px dashed #000; padding: 8px 0; margin: 8px 0;">
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 3px;">
                    <span><strong>ID:</strong> ${t.id.substring(0,8)}</span>
                    <span><strong>Kasir:</strong> ${s}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                    <span><strong>Tanggal:</strong></span>
                    <span>${xt(t.createdAt)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 3px;">
                    <span><strong>Pelanggan:</strong></span>
                    <span>${e}</span>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; margin: 8px 0 4px 0; border-bottom: 1px dashed #000; padding-bottom: 4px;">
                <span style="flex: 1; text-align: left;">ITEM</span>
                <span style="width: 30px; text-align: center;">QTY</span>
                <span style="width: 50px; text-align: right;">HARGA</span>
                <span style="width: 50px; text-align: right;">TOTAL</span>
            </div>

            <div>
                ${n.map(b=>`
                    <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 4px;">
                        <span style="flex: 1; text-align: left; word-break: break-word;">${b.nama_produk}</span>
                        <span style="width: 30px; text-align: center;">${b.qty}</span>
                        <span style="width: 50px; text-align: right;">${y(b.harga_jual_ritel)}</span>
                        <span style="width: 50px; text-align: right;">${y(b.qty*b.harga_jual_ritel)}</span>
                    </div>
                `).join("")}
            </div>

            <div style="border-top: 2px dashed #000; margin: 8px 0; padding-top: 8px;">
    <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; margin-bottom: 4px;">
        <span>TOTAL BELANJA:</span>
        <span>Rp ${y(u)}</span>
    </div>

    <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 2px;">
        <span>Tunai:</span>
        <span>Rp ${y($)}</span>
    </div>
    
    ${w>0?`
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; color: #2ecc71;">
            <span>Kembali:</span>
            <span>Rp ${y(w)}</span>
        </div>
    `:""}

    ${I>0?`
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; color: #e74c3c; margin-top: 5px;">
            <span>SISA HUTANG:</span>
            <span>Rp ${y(I)}</span>
        </div>
    `:""}
    </div>


            <div style="margin-top: 10px; font-size: 11px; line-height: 1.6;">
                <div>Terima Kasih Atas Kunjungan Anda</div>
                <div>Periksa barang sebelum dibeli</div>
                <div style="font-size: 10px; color: #666;">Barang yang sudah dibeli<br>tidak bisa ditukar atau dikembalikan</div>
            </div>
        </div>
    `},Pt=(t,e,n,s,v,C)=>{const $=Bt(t,e,n,s,v,C),u=window.open("","","width=350,height=700,scrollbars=yes");if(!u){i.fire("Error","Gagal membuka jendela cetak. Periksa setelan pop-up browser Anda.","error");return}u.document.write(`
        <!DOCTYPE html>
        <html>
            <head>
                <meta charset="UTF-8">
                <title>Struk Transaksi ${t.id.substring(0,8)}</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        font-family: 'Courier New', monospace; 
                        font-size: 12px;
                        background: #f5f5f5;
                        padding: 10px;
                    }
                    @media print {
                        body { padding: 0; background: white; }
                        @page { margin: 0; size: 80mm auto; }
                    }
                </style>
            </head>
            <body onload="window.print(); setTimeout(() => window.close(), 500);">
                ${$}
            </body>
        </html>
    `),u.document.close()},Ct=async()=>{var C,$;if(!p.value){i.fire("Peringatan","Pelanggan harus dipilih.","warning");return}if(r.value.length===0){i.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!j.value){i.fire("Error","Data kasir/toko belum dimuat. Mohon refresh halaman atau cek koneksi API.","error");return}if(dt.value&&!ut.value){i.fire("Peringatan","Toko harus dipilih untuk melakukan penjualan.","warning");return}if(!(await i.fire({icon:"question",title:"Konfirmasi Transaksi",html:`<div class="text-left">
                   <p class="mb-3"><strong>Total Belanja:</strong> ${d(_.value)}</p>
                   <p class="mb-3"><strong>Uang Bayar:</strong> ${d(m.value)}</p>
                   <p class="mb-4"><strong>Kembalian/Hutang:</strong> <span class="${P.value<0?"text-red-600 font-bold ":"text-green-600 font-bold"}">${d(Math.abs(P.value))}</span></p>
                   <hr class="my-3">
                   <p class="text-sm text-gray-600">Periksa kembali data di atas sebelum melanjutkan.</p>
               </div>`,showCancelButton:!0,confirmButtonText:"Ya, Lanjutkan",cancelButtonText:"Batalkan",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return;const e=P.value;if(e<0){const u=Math.abs(e);if(!(await i.fire({icon:"warning",title:"Kurang Bayar!",html:`<p>Pembayaran <strong>kurang</strong> sebesar <strong>${d(u)}</strong>.</p>
                   <p class="mt-2 text-red-500 font-semibold">Transaksi ini akan dicatat sebagai <strong>Hutang</strong>.</p>
                   <p class="text-sm mt-3">Lanjutkan proses transaksi?</p>`,showCancelButton:!0,confirmButtonText:"Ya, Catat Hutang",cancelButtonText:"Batalkan Transaksi",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return}const n=[...r.value],s=r.value.map(u=>({barcode:u.barcode,qty:u.qty})),v={pelanggan_id:p.value,pembayaran:m.value,items:s};A.value=!0;try{const u=await q.post(`${S}/transaksi/create/ritel`,v,{headers:N()});if(u.data.success){const w=u.data.data.transaksi,I=w.sisa_hutang||0,y=w.total_kembalian||0,b=u.data.data.pelanggan.nama_pelanggan;Pt(w,b,n,j.value.full_name,j.value.toko.nama_toko,j.value.toko.alamat);let M,E,H;I>0?(H="warning",M="Transaksi Tercatat sebagai Hutang!",E=`<p class="text-lg font-bold mt-2">Pelanggan: ${b}</p>
                           <p class="text-xl font-bold mt-1 text-red-600">Sisa Hutang: ${d(I)}</p>`):I===0?y>0?(H="success",M="Transaksi Berhasil!",E=`<p class="text-lg font-bold mt-2">Total Belanja: ${d(_.value)}</p>
                               <p class="text-lg font-bold mt-1">Uang Bayar: ${d(m.value)}</p>
                               <p class="text-xl font-bold mt-2 text-green-600">Kembalian: ${d(y)}</p>`):(H="success",M="Transaksi Berhasil!",E='<p class="text-lg font-bold mt-2">Pembayaran Lunas Pas!</p>'):(H="error",M="Error Logika Transaksi!",E='<p class="text-lg font-bold mt-2">Terdeteksi error internal. Hubungi Admin.</p>'),i.fire({icon:H,title:M,html:E}),T.value!==null&&Q(T.value,!1),await tt(p.value),J()}else i.fire({icon:"error",title:"Transaksi Gagal",text:u.data.message||"Terjadi kesalahan saat memproses transaksi."})}catch(u){console.error("Error transaksi:",u),i.fire({icon:"error",title:"Error",text:(($=(C=u.response)==null?void 0:C.data)==null?void 0:$.message)||"Gagal terhubung ke server."})}finally{A.value=!1}},$t=async t=>{const e=await i.fire({title:"Jumlah Barang",html:`
            <p class="mb-3 text-gray-700 font-medium">${t.nama_produk}</p>
            <input id="qty-input" type="number" min="1" value="1" 
                class="swal2-input w-full text-center text-lg font-bold text-gray-800" 
                autofocus>
        `,showCancelButton:!0,confirmButtonText:"Tambahkan",cancelButtonText:"Batal",confirmButtonColor:"#0891b2",cancelButtonColor:"#6b7280",allowOutsideClick:!1,didOpen:()=>{const n=document.getElementById("qty-input");n&&(n.focus(),n.select(),n.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),i.clickConfirm())}))},preConfirm:()=>{const n=document.getElementById("qty-input"),s=parseInt(n.value);return!s||s<=0||isNaN(s)?(i.showValidationMessage("Masukkan jumlah yang valid (minimal 1)"),!1):s}});return e.isConfirmed&&e.value?e.value:null};return Dt(async()=>{var t;await ht(),await yt(),wt(),(t=K.value)==null||t.focus()}),(t,e)=>(c(),St(Et,null,{default:At(()=>[a("div",qt,[a("div",Kt,[a("div",Rt,[e[3]||(e[3]=a("label",{class:"block text-sm font-medium label-text mb-2"}," Cari Produk ",-1)),W(a("input",{onKeypress:ct,ref_key:"barcodeInputRef",ref:K,"onUpdate:modelValue":e[0]||(e[0]=n=>R.value=n),type:"text",style:{"font-size":"12px"},placeholder:"Ketik nama produk...",onInput:e[1]||(e[1]=n=>vt(R.value)),onKeydown:bt,disabled:Nt(it)!=="admin",class:"input-field w-full h-8 px-4 rounded-lg transition"},null,40,Lt),[[nt,R.value]]),B.value&&h.value.length>0?(c(),g("div",Ft,[(c(!0),g(V,null,U(h.value,(n,s)=>(c(),g("div",{key:n.barcode,onClick:v=>Z(n),class:D([s===f.value?"dropdown-item-active":"dropdown-item","px-2 py-1 cursor-pointer last:border-b-0 transition"])},[a("div",Ut,l(n.nama_produk),1)],10,Vt))),128))])):z("",!0)]),a("div",null,[e[5]||(e[5]=a("label",{class:"block text-sm font-medium label-text mb-2"}," Pilih Pelanggan ",-1)),W(a("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>p.value=n),required:"",style:{"font-size":"12px"},class:"input-field w-full h-8 rounded-lg px-4 transition"},[e[4]||(e[4]=a("option",{value:"",disabled:""},"Pilih Pelanggan...",-1)),O.value?(c(),g("option",Gt,"Memuat...")):z("",!0),(c(!0),g(V,null,U(G.value,n=>(c(),g("option",{key:n.id,value:n.id},l(n.nama_pelanggan),9,Ot))),128))],512),[[Mt,p.value]])])]),p.value?(c(),g("div",Yt,[a("div",Jt,[e[6]||(e[6]=a("span",{class:"text-sm font-medium text-muted"},"Hutang Pelanggan",-1)),a("span",{class:D(["text-lg",k.value>0?"text-danger":"text-success"])},l(d(k.value)),3)])])):z("",!0),x.value.length>0?(c(),g("div",Qt,[a("div",Wt,[e[7]||(e[7]=a("div",{class:"w-1 h-6 indicator-bar rounded"},null,-1)),a("p",Xt," Transaksi Pending ("+l(x.value.length)+") ",1)]),a("div",Zt,[(c(!0),g(V,null,U(x.value,n=>(c(),g("div",{key:n.id,class:D(["p-4 border-2 rounded-lg transition cursor-pointer pending-card",n.id===T.value?"pending-card-active":"pending-card-inactive"])},[a("div",te,[a("p",ee,l(n.nama_pelanggan),1),a("p",ae,l(d(n.total)),1),a("p",ne,l(n.tanggal_simpan),1)]),a("div",se,[a("button",{onClick:s=>jt(n),class:"btn-primary-small text-sm px-3 py-1.5 rounded-md font-medium transition"}," Muat ",8,oe),a("button",{onClick:s=>Q(n.id),class:"btn-secondary-small text-sm px-3 py-1.5 rounded-md font-medium transition"}," Hapus ",8,le)])],2))),128))])])):z("",!0),a("div",ie,[a("div",re,[a("table",de,[e[10]||(e[10]=a("thead",null,[a("tr",{class:"table-header border-b"},[a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-left uppercase tracking-wider th-text"},"No"),a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-left uppercase tracking-wider th-text"},"Produk"),a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-center uppercase tracking-wider th-text"},"Qty"),a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-right uppercase tracking-wider th-text"},"Harga"),a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-right uppercase tracking-wider th-text"},"Subtotal"),a("th",{style:{"font-size":"12px"},class:"px-6 py-4 text-center uppercase tracking-wider th-text"})])],-1)),a("tbody",ue,[r.value.length===0?(c(),g("tr",ce,e[8]||(e[8]=[a("td",{colspan:"6",class:"px-6 py-12 text-center text-muted-light"},[a("div",{class:"space-y-2"},[a("svg",{class:"w-12 h-12 mx-auto opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})]),a("p",{class:"text-sm"},"Belum ada produk ditambahkan")])],-1)]))):z("",!0),(c(!0),g(V,null,U(r.value,(n,s)=>(c(),g("tr",{key:n.barcode,class:"table-row-hover transition"},[a("td",pe,l(s+1),1),a("td",ge,[a("div",me,l(n.nama_produk),1)]),a("td",fe,[W(a("input",{"onUpdate:modelValue":v=>n.qty=v,type:"number",min:"1",onChange:v=>_t(n.barcode,n.qty),class:"input-qty w-20 text-center border rounded-md px-2 py-1 text-sm transition"},null,40,ve),[[nt,n.qty,void 0,{number:!0}]])]),a("td",be,l(d(n.harga_jual_ritel)),1),a("td",xe,l(d(n.qty*n.harga_jual_ritel)),1),a("td",he,[a("button",{type:"button",onClick:v=>et(n.barcode),class:"btn-icon-delete p-1.5 rounded-md transition"},e[9]||(e[9]=[a("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ye)])]))),128))])])]),a("div",ke,[e[11]||(e[11]=a("span",{class:"text-base text-muted-dark"},"Total Belanja",-1)),a("span",_e,l(d(_.value)),1)])]),a("div",we,[a("div",null,[e[13]||(e[13]=a("label",{class:"block text-sm font-medium label-text mb-2"},[X(" Jumlah Bayar "),a("span",{class:"text-danger"},"*")],-1)),a("div",Te,[e[12]||(e[12]=a("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-sm font-semibold text-muted"},"Rp",-1)),a("input",{value:L.value||m.value||"",onInput:gt,onFocus:mt,onBlur:ft,type:"text",required:"",placeholder:"0",class:"input-field w-full h-10 pl-12 pr-4 rounded-lg border text-sm transition"},null,40,je)])]),a("div",Be,[a("div",Pe,[e[14]||(e[14]=a("span",{class:"text-muted"},"Hutang Lama:",-1)),a("span",{class:D(["font-semibold",k.value>0?"text-danger":"text-success"])},l(d(k.value)),3)]),a("div",Ce,[e[15]||(e[15]=a("span",{class:"text-muted"},"Total Belanja:",-1)),a("span",$e,l(d(_.value)),1)]),a("div",{class:D(["flex justify-between text-base border-t pt-3 border-divider",Y.value>0?"text-orange-custom":"text-body"])},[e[16]||(e[16]=a("span",null,"Total yang Harus Dibayar:",-1)),a("span",null,l(d(Y.value)),1)],2),a("div",Ie,[e[17]||(e[17]=a("span",{class:"text-muted"},"Uang Bayar:",-1)),a("span",ze,l(d(m.value)),1)]),a("div",{class:D(["flex justify-between text-base border-t pt-3 border-divider",P.value>=0?"text-success":"text-danger"])},[a("span",null,l(P.value>=0?"Kembalian":"Sisa Hutang"),1),a("span",null,l(d(Math.abs(P.value))),1)],2)])]),a("div",De,[a("button",{type:"button",onClick:st(Tt,["prevent"]),disabled:r.value.length===0||!p.value,class:"btn-pending h-12 font-medium rounded-lg flex items-center justify-center gap-2 transition"},e[18]||(e[18]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),X(" Simpan (Pending) ")]),8,Se),a("button",{type:"submit",onClick:st(Ct,["prevent"]),disabled:A.value||_.value===0||!p.value,class:"md:col-span-2 h-12 btn-submit text-base font-semibold rounded-lg flex items-center justify-center gap-2 shadow-sm transition transform hover:scale-[1.01]"},[A.value?(c(),g("svg",Ne,e[19]||(e[19]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):z("",!0),X(" "+l(A.value?"Memproses...":"Proses Transaksi"),1)],8,Ae)])])]),_:1}))}}),Le=Ht(Me,[["__scopeId","data-v-f31b433e"]]);export{Le as default};
