import{j as He,r as o,c as U,y as qe,o as Le,b as p,a as Fe,w as Oe,d as a,p as ne,v as ue,u as Ue,e as g,F as V,h as G,q as j,z as Ve,B as ce,x as se,n as D,t as l,f as pe,i as Ge,A as L}from"./index-gocu0IY7.js";import{S as i,a as F}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Ye}from"./AdminLayout-lBlo5SBi.js";import{_ as Je}from"./_plugin-vue_export-helper-DlAUqK2U.js";const We={class:"page-container py-2 space-y-2 min-h-screen"},Qe={class:"grid grid-cols-1 lg:grid-cols-3 gap- p-4"},Xe={class:"lg:col-span-2 relative"},Ze=["disabled"],et={key:0,class:"dropdown-container absolute top-full left-0 right-0 mt-2 rounded-lg shadow-xl z-20 max-h-200 overflow-y-auto"},tt=["onClick"],at={style:{"font-size":"14px"},class:"dropdown-text space-y-1 border border-gray-200 p-2"},nt={class:"font-semibold text-xl"},st={class:"text-green-800 text-lg font-semibold"},ot=["onKeydown"],lt={key:0,disabled:""},rt=["value"],it={key:0,class:"card-section p-4 rounded-lg border mx-4"},dt={class:"flex justify-between items-center"},ut={key:1,class:"space-y-3 px-4"},ct={class:"flex items-center gap-2"},pt={class:"text-sm font-bold text-title"},gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},mt={class:"mb-3"},ft={class:"text-sm font-semibold text-title"},vt={class:"text-lg font-bold text-warning mt-1"},bt={class:"text-xs text-muted mt-2"},xt={class:"flex gap-2 justify-end"},ht=["onClick"],yt=["onClick"],kt={class:"px-6 py-2 bg-footer border-t flex justify-between items-center mx-4 rounded-t-lg"},_t={class:"text-3xl font-bold"},wt={class:"card-section rounded-lg shadow-sm border overflow-hidden p-4 mx-4"},Bt={class:"overflow-x-auto"},jt={class:"w-full"},Pt={class:"divide-y divide-border"},Tt={key:0},Ct={class:"px-6 text-xl text-gray-800 font-bold border border-gray-800"},$t={class:"px-6 border border-gray-800"},It={class:"text-xl text-gray-800 font-semibold leading-tight"},St={class:"px-6 text-center border border-gray-800"},Dt=["onUpdate:modelValue","onChange"],Rt={class:"px-6 text-right text-xl text-gray-800 font-semibold border border-gray-800"},Nt={class:"px-6 text-right text-xl font-bold text-gray-900 border border-gray-800"},zt={class:"px-6 border border-gray-800 text-center"},At=["onClick"],Mt={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg"},Kt={class:"max-w-7xl mx-auto p-4"},Et={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Ht=["disabled"],qt=["disabled"],Lt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ft={class:"card-section w-full max-w-2xl rounded-lg shadow-2xl relative z-10 p-6 space-y-4 max-h-[90vh] overflow-y-auto"},Ot={class:"space-y-4"},Ut={class:"relative"},Vt=["value"],Gt={class:"card-section p-5 border rounded-lg space-y-3 bg-gray-50"},Yt={class:"flex justify-between text-sm"},Jt={class:"font-bold text-lg"},Wt={class:"flex justify-between text-sm"},Qt={class:"flex justify-between text-sm"},Xt={class:"font-semibold text-body"},Zt={class:"text-muted text-xl font-bold"},ea={class:"flex justify-between text-sm border-t pt-3 border-divider"},ta={class:"font-semibold text-body"},aa={class:"pt-4 border-t"},na=["disabled"],sa={key:0,class:"animate-spin h-6 w-6",fill:"none",viewBox:"0 0 24 24"},ge="pendingTransactions",oa=He({__name:"PenjualanGrosir",setup(la){const me=Ge(),R="https://alentest.my.id/pos",k=o(0),fe=localStorage.getItem("role_name"),Y=o(!1),f=o(-1),O=o([]),J=o(!1),N=o(!1),c=o(""),m=o(0),z=o(null),ve=o(null),r=o([]),h=o([]),P=o(null),T=o(null),A=o(""),v=o([]),_=o(!1),M=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`});U(()=>{var e;return((e=T.value)==null?void 0:e.role_name)==="superadmin"});const K=o(""),W=U(()=>{const e=Number(k.value)||0,t=Number(w.value)||0;return e+t}),Q=o(null),X=o(null),Z=o(null),be=e=>{/\d/.test(e.key)&&e.preventDefault()},xe=e=>{const t=e.replace(/\D/g,""),n=parseInt(t)||0;m.value=n,t===""?K.value="":K.value=new Intl.NumberFormat("id-ID").format(n)},he=e=>{const t=e.target;xe(t.value)},ye=e=>{const t=e.target;m.value>0&&(t.value=m.value.toString())},ke=e=>{const t=e.target;m.value>0&&(t.value=K.value)},_e=e=>{e.key==="Enter"&&(e.preventDefault(),L(()=>{var t,n;(t=X.value)==null||t.focus(),(n=X.value)==null||n.click()}))},we=()=>{Z.value&&Z.value.focus()},Be=()=>{if(!c.value){i.fire("Peringatan","Mohon pilih pelanggan terlebih dahulu.","warning");return}if(r.value.length===0){i.fire("Peringatan","Keranjang belanja masih kosong.","warning");return}Y.value=!0,L(()=>{Q.value&&Q.value.focus()})},ee=()=>{Y.value=!1,L(()=>{var e;(e=z.value)==null||e.focus()})},je=async e=>{if(!e.trim()){v.value=[],_.value=!1;return}try{const t=await F.get(`${R}/produk`,{params:{search:e},headers:M()});t.data.success&&t.data.data.data&&(v.value=t.data.data.data.map(n=>({barcode:n.barcode,qty:1,nama_produk:n.nama_produk,harga_jual_ritel:parseFloat(n.harga_jual_ritel)})),_.value=!0,f.value=-1)}catch(t){console.error("Error searching products:",t),v.value=[]}},Pe=e=>{if(!(!_.value||v.value.length===0))switch(e.key){case"ArrowDown":e.preventDefault(),f.value=Math.min(f.value+1,v.value.length-1);break;case"ArrowUp":e.preventDefault(),f.value=Math.max(f.value-1,-1);break;case"Enter":e.preventDefault(),f.value>=0&&oe(v.value[f.value]);break;case"Escape":e.preventDefault(),_.value=!1,f.value=-1;break}},oe=async e=>{const t=await Ee(e);t!==null&&(Se(e,t),i.fire({icon:"success",title:"Berhasil",text:`${t} ${e.nama_produk} ditambahkan`,timer:1500,showConfirmButton:!1})),A.value="",v.value=[],_.value=!1,f.value=-1,L(()=>{var n;(n=z.value)==null||n.focus()})},d=e=>e==null||isNaN(e)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),Te=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Ce=e=>{const t=O.value.find(n=>n.id===e);return t?t.nama_pelanggan:"Umum / Tidak Dikenal"},w=U(()=>r.value.reduce((e,t)=>e+t.qty*t.harga_jual_ritel,0)),C=U(()=>{const e=Number(m.value)||0,t=Number(W.value)||0;return e-t}),$e=async()=>{try{const e=await F.get(`${R}/user/my/data`,{headers:M()});e.data.success&&(T.value={full_name:e.data.data.full_name,role_name:e.data.data.role_name,toko:{id:e.data.data.toko.id,nama_toko:e.data.data.toko.nama_toko,alamat:e.data.data.toko.alamat}})}catch(e){console.error("Gagal mengambil data kasir:",e)}},le=async e=>{try{const t=await F.get(`${R}/pelanggan/${e}`,{headers:M()});t.data.success&&t.data.data&&(k.value=Number(t.data.data.hutang)||0)}catch(t){console.error("Gagal mengambil hutang pelanggan:",t),k.value=0}};qe(c,async e=>{e?await le(e):k.value=0});const Ie=async()=>{J.value=!0;try{const e=await F.get(`${R}/pelanggan`,{headers:M()});e.data.success&&(O.value=e.data.data)}catch(e){console.error("Gagal mengambil data pelanggan:",e)}finally{J.value=!1}},te=()=>{c.value="",m.value=0,K.value="",r.value=[],P.value=null,ee(),L(()=>{var e;(e=z.value)==null||e.focus(),A.value="",v.value=[],_.value=!1})},Se=(e,t=1)=>{const n=r.value.find(s=>s.barcode===e.barcode);n?(n.qty+=t,r.value=[n,...r.value.filter(s=>s.barcode!==e.barcode)]):r.value.unshift({barcode:e.barcode,qty:t,nama_produk:e.nama_produk,harga_jual_ritel:parseFloat(e.harga_jual_ritel.toString())})},De=(e,t)=>{const n=r.value.find(s=>s.barcode===e);n&&(t<=0||isNaN(t)?re(e):n.qty=t)},re=e=>{r.value=r.value.filter(t=>t.barcode!==e)},ie=()=>{try{localStorage.setItem(ge,JSON.stringify(h.value))}catch(e){console.error("Error saving pending transactions:",e)}},Re=()=>{try{const e=localStorage.getItem(ge);h.value=e?JSON.parse(e):[]}catch(e){console.error("Error loading pending transactions:",e),h.value=[]}},Ne=async()=>{if(r.value.length===0){i.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!c.value){i.fire("Peringatan","Pelanggan harus dipilih untuk menyimpan transaksi pending.","warning");return}const e=O.value.find(s=>s.id===c.value),t=e?e.nama_pelanggan:"Pelanggan Tidak Dikenal",n={id:Date.now(),pelanggan_id:c.value,nama_pelanggan:t,items:[...r.value],tanggal_simpan:new Date().toLocaleString("id-ID"),total:w.value};h.value.push(n),ie(),i.fire("Berhasil","Transaksi telah disimpan sebagai pending.","success"),te()},ze=e=>{te(),c.value=e.pelanggan_id,r.value=e.items,m.value=0,P.value=e.id,i.fire("Dimuat",`Transaksi untuk ${e.nama_pelanggan} telah dimuat ke keranjang.`,"info"),ae(P.value,!1)},ae=(e,t=!0)=>{h.value=h.value.filter(n=>n.id!==e),ie(),t&&i.fire("Berhasil","Transaksi pending telah dihapus.","success")},Ae=(e,t,n,s,b,$)=>{const I=e.total_bayar,u=e.total_harga,B=e.total_kembalian,S=e.sisa_hutang,y=x=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(x);return`
        <div style="
            font-family: Arial, Helvetica, sans-serif; 
            font-size: 11px; 
            color: #000; 
            width: 100%;
            padding-left: 20px;
            padding-right: 5px;
        ">
            <div style="text-align: center; margin-bottom: 10px;">
                <div style="font-size: 14px; margin-bottom: 5px;">${b.toUpperCase()}</div>
                <div style="font-size: 10px; line-height: 1.2;">
                    ${$.replace(/\n/g,"<br>")}
                </div>
            </div>

            <div style="border-bottom: 1px solid #000; padding-bottom: 5px; margin-bottom: 5px;">
                <div style="display: flex; justify-content: space-between;">
                    <span>ID: ${e.id.substring(0,8)}</span>
                    <span>${Te(e.createdAt)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 2px;">
                    <span>Kasir: ${s}</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Plg: ${t}</span>
                </div>
            </div>

            <div style="margin-bottom: 5px; border-bottom: 1px solid #000; padding-bottom: 5px;">
                ${n.map(x=>`
                    <div style="margin-bottom: 6px;">
                        <div style="margin-bottom: 2px;">
                            ${x.nama_produk}
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 10px;">
                            <span>${x.qty}x Rp ${y(x.harga_jual_ritel)}</span>
                            <span>Rp ${y(x.qty*x.harga_jual_ritel)}</span>
                        </div>
                    </div>
                `).join("")}
            </div>

            <div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 3px; font-size: 12px;">
                    <span>TOTAL:</span>
                    <span>Rp ${y(u)}</span>
                </div>

                <div style="display: flex; justify-content: space-between; margin-bottom: 1px;">
                    <span>Tunai:</span>
                    <span>Rp ${y(I)}</span>
                </div>
                
                ${B>0?`
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1px;">
                        <span>Kembali:</span>
                        <span>Rp ${y(B)}</span>
                    </div>
                `:""}

                ${S>0?`
                    <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 11px;">
                        <span>SISA HUTANG:</span>
                        <span>Rp ${y(S)}</span>
                    </div>
                `:""}
            </div>

            <div style="margin-top: 15px; text-align: center; font-size: 10px;">
                <div>Terima Kasih</div>
                <div style="margin-top: 2px;">Barang yang dibeli tidak dapat ditukar/dikembalikan</div>
            </div>
        </div>
    `},Me=(e,t,n,s,b,$)=>{const I=Ae(e,t,n,s,b,$),u=window.open("","","width=400,height=600");if(!u){i.fire("Error","Gagal membuka jendela cetak. Periksa setelan pop-up browser Anda.","error");return}u.document.write(`
        <!DOCTYPE html>
        <html>
            <head>
                <meta charset="UTF-8">
                <title>Struk #${e.id.substring(0,8)}</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        font-family: Arial, Helvetica, sans-serif;
                        background: #fff;
                        color: #000;
                    }
                    @media print {
                        @page {
                            margin: 0;
                            size: auto;
                        }
                        body {
                            width: 100%;
                        }
                    }
                </style>
            </head>
            <body onload="window.print(); setTimeout(() => window.close(), 1000);">
                ${I}
            </body>
        </html>
    `),u.document.close()},Ke=async()=>{var $,I;if(!c.value){i.fire("Peringatan","Pelanggan harus dipilih.","warning");return}if(r.value.length===0){i.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!T.value){i.fire("Error","Data kasir/toko belum dimuat. Mohon refresh halaman atau cek koneksi API.","error");return}if(!(await i.fire({icon:"question",title:"Konfirmasi Transaksi",html:`<div class="text-left">
                   <p class="mb-3"><strong>Total Belanja:</strong> ${d(w.value)}</p>
                   <p class="mb-3"><strong>Uang Bayar:</strong> ${d(m.value)}</p>
                   <p class="mb-4"><strong>Kembalian/Hutang:</strong> <span class="${C.value<0?"text-red-600 font-bold ":"text-green-600 font-bold"}">${d(Math.abs(C.value))}</span></p>
                   <hr class="my-3">
                   <p class="text-sm text-gray-600">Periksa kembali data di atas sebelum melanjutkan.</p>
               </div>`,showCancelButton:!0,confirmButtonText:"Ya, Lanjutkan",cancelButtonText:"Batalkan",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return;const t=C.value;if(t<0){const u=Math.abs(t);if(!(await i.fire({icon:"warning",title:"Kurang Bayar!",html:`<p>Pembayaran <strong>kurang</strong> sebesar <strong>${d(u)}</strong>.</p>
                   <p class="mt-2 text-red-500 font-semibold">Transaksi ini akan dicatat sebagai <strong>Hutang</strong>.</p>
                   <p class="text-sm mt-3">Lanjutkan proses transaksi?</p>`,showCancelButton:!0,confirmButtonText:"Ya, Catat Hutang",cancelButtonText:"Batalkan Transaksi",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return}const n=[...r.value],s=r.value.map(u=>({barcode:u.barcode,qty:u.qty})),b={pelanggan_id:c.value,pembayaran:m.value,items:s};N.value=!0;try{const u=await F.post(`${R}/transaksi/create/ritel`,b,{headers:M()});if(u.data.success){const B=u.data.data.transaksi,S=B.sisa_hutang||0,y=B.total_kembalian||0,x=u.data.data.pelanggan.nama_pelanggan;Me(B,x,n,T.value.full_name,T.value.toko.nama_toko,T.value.toko.alamat);let E,H,q;S>0?(q="warning",E="Transaksi Tercatat sebagai Hutang!",H=`<p class="text-lg font-bold mt-2">Pelanggan: ${x}</p>
                   <p class="text-xl font-bold mt-1 text-red-600">Sisa Hutang: ${d(S)}</p>`):S===0?(y>0?(q="success",E="Transaksi Berhasil!",H=`<p class="text-lg font-bold mt-2">Total Belanja: ${d(w.value)}</p>
                       <p class="text-lg font-bold mt-1">Uang Bayar: ${d(m.value)}</p>
                       <p class="text-xl font-bold mt-2 text-green-600">Kembalian: ${d(y)}</p>`):(q="success",E="Transaksi Berhasil!",H='<p class="text-lg font-bold mt-2">Pembayaran Lunas Pas!</p>'),me.push("/penjualan-grosir")):(q="error",E="Error Logika Transaksi!",H='<p class="text-lg font-bold mt-2">Terdeteksi error internal. Hubungi Admin.</p>'),i.fire({icon:q,title:E,html:H,confirmButtonText:"OK",confirmButtonColor:"#0891b2",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{const de=document.querySelector(".swal2-confirm");de&&de.focus()}}).then(()=>{P.value!==null&&ae(P.value,!1),le(c.value),te()})}else i.fire({icon:"error",title:"Transaksi Gagal",text:u.data.message||"Terjadi kesalahan saat memproses transaksi."})}catch(u){console.error("Error transaksi:",u),i.fire({icon:"error",title:"Error",text:((I=($=u.response)==null?void 0:$.data)==null?void 0:I.message)||"Gagal terhubung ke server."})}finally{N.value=!1}},Ee=async e=>{const t=await i.fire({title:"Jumlah Barang",html:`
            <p class="mb-3 text-gray-700 font-medium">${e.nama_produk}</p>
            <input id="qty-input" type="number" min="1" value="1" 
                class="swal2-input w-full text-center text-lg font-bold text-gray-800" 
                autofocus>
        `,showCancelButton:!0,confirmButtonText:"Tambahkan",cancelButtonText:"Batal",confirmButtonColor:"#0891b2",cancelButtonColor:"#6b7280",allowOutsideClick:!1,didOpen:()=>{const n=document.getElementById("qty-input");n&&(n.focus(),n.select(),n.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),i.clickConfirm())}))},preConfirm:()=>{const n=document.getElementById("qty-input"),s=parseInt(n.value);return!s||s<=0||isNaN(s)?(i.showValidationMessage("Masukkan jumlah yang valid (minimal 1)"),!1):s}});return t.isConfirmed&&t.value?t.value:null};return Le(async()=>{var e;await $e(),await Ie(),Re(),(e=z.value)==null||e.focus()}),(e,t)=>(p(),Fe(Ye,null,{default:Oe(()=>[a("div",We,[a("div",Qe,[a("div",Xe,[t[3]||(t[3]=a("label",{class:"block text-xl font-semibold label-text mb-2"}," Cari Produk ",-1)),ne(a("input",{onKeypress:be,ref_key:"barcodeInputRef",ref:z,"onUpdate:modelValue":t[0]||(t[0]=n=>A.value=n),type:"text",style:{"font-size":"12px"},placeholder:"Ketik nama produk...",onInput:t[1]||(t[1]=n=>je(A.value)),onKeydown:Pe,disabled:Ue(fe)!=="admin",class:"input-field w-full h-12 px-4 text-xl rounded-lg transition"},null,40,Ze),[[ue,A.value]]),_.value&&v.value.length>0?(p(),g("div",et,[(p(!0),g(V,null,G(v.value,(n,s)=>(p(),g("div",{key:n.barcode,onClick:b=>oe(n),class:D([s===f.value?"dropdown-item-active":"dropdown-item","px-2 py-1 cursor-pointer last:border-b-0 transition"])},[a("div",at,[a("div",nt,l(n.nama_produk),1),a("div",st,l(d(n.harga_jual_ritel)),1)])],10,tt))),128))])):j("",!0)]),a("div",null,[t[5]||(t[5]=a("label",{class:"block text-xl font-semibold label-text mb-2 ml-3"}," Pilih Pelanggan ",-1)),ne(a("select",{ref_key:"pelangganSelectRef",ref:ve,"onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),required:"",style:{"font-size":"12px"},onKeydown:ce(se(we,["prevent"]),["enter"]),class:"input-field w-full h-12 rounded-lg px-4 transition ml-3"},[t[4]||(t[4]=a("option",{value:"",disabled:""},"Pilih Pelanggan...",-1)),J.value?(p(),g("option",lt,"Memuat...")):j("",!0),(p(!0),g(V,null,G(O.value,n=>(p(),g("option",{key:n.id,value:n.id},l(n.nama_pelanggan),9,rt))),128))],40,ot),[[Ve,c.value]])])]),c.value?(p(),g("div",it,[a("div",dt,[t[6]||(t[6]=a("span",{class:"text-2xl font-semibold"},"Hutang Pelanggan",-1)),a("span",{class:D(["text-lg",k.value>0?"text-danger":"text-success"])},l(d(k.value)),3)])])):j("",!0),h.value.length>0?(p(),g("div",ut,[a("div",ct,[t[7]||(t[7]=a("div",{class:"w-1 h-6 indicator-bar rounded"},null,-1)),a("p",pt," Transaksi Pending ("+l(h.value.length)+") ",1)]),a("div",gt,[(p(!0),g(V,null,G(h.value,n=>(p(),g("div",{key:n.id,class:D(["p-4 border-2 rounded-lg transition cursor-pointer pending-card",n.id===P.value?"pending-card-active":"pending-card-inactive"])},[a("div",mt,[a("p",ft,l(n.nama_pelanggan),1),a("p",vt,l(d(n.total)),1),a("p",bt,l(n.tanggal_simpan),1)]),a("div",xt,[a("button",{onClick:s=>ze(n),class:"btn-primary-small text-sm px-3 py-1.5 rounded-md font-medium transition"}," Muat ",8,ht),a("button",{onClick:s=>ae(n.id),class:"btn-secondary-small text-sm px-3 py-1.5 rounded-md font-medium transition"}," Hapus ",8,yt)])],2))),128))])])):j("",!0),a("div",kt,[t[8]||(t[8]=a("span",{class:"text-2xl font-semibold text-muted-dark"},"Total Belanja",-1)),a("span",_t,l(d(w.value)),1)]),a("div",wt,[a("div",Bt,[a("table",jt,[t[11]||(t[11]=a("thead",null,[a("tr",{class:"table-header border-b"},[a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-left uppercase tracking-wider th-text"}," No "),a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-left uppercase tracking-wider th-text"}," Produk "),a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-center uppercase tracking-wider th-text"}," Qty "),a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-right uppercase tracking-wider th-text"}," Harga "),a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-right uppercase tracking-wider th-text"}," Subtotal "),a("th",{style:{"font-size":"15px"},class:"px-6 text-white py-4 text-center uppercase tracking-wider th-text"})])],-1)),a("tbody",Pt,[r.value.length===0?(p(),g("tr",Tt,t[9]||(t[9]=[a("td",{colspan:"6",class:"px-6 py-12 text-center text-muted-light"},[a("div",{class:"space-y-2"},[a("svg",{class:"w-12 h-12 mx-auto opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})]),a("p",{class:"text-xl text-black"},"Belum ada produk ditambahkan")])],-1)]))):j("",!0),(p(!0),g(V,null,G(r.value,(n,s)=>(p(),g("tr",{key:n.barcode,class:"border border-gray-800 hover:bg-gray-50 transition-colors"},[a("td",Ct,l(s+1),1),a("td",$t,[a("div",It,l(n.nama_produk),1)]),a("td",St,[ne(a("input",{"onUpdate:modelValue":b=>n.qty=b,type:"number",min:"1",onChange:b=>De(n.barcode,n.qty),class:"w-20 text-center border border-gray-300 rounded-md px-2 py-1.5 text-xl font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,40,Dt),[[ue,n.qty,void 0,{number:!0}]])]),a("td",Rt,l(d(n.harga_jual_ritel)),1),a("td",Nt,l(d(n.qty*n.harga_jual_ritel)),1),a("td",zt,[a("button",{type:"button",onClick:b=>re(n.barcode),class:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors"},t[10]||(t[10]=[a("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,At)])]))),128))])])])]),a("div",Mt,[a("div",Kt,[a("div",Et,[a("button",{type:"button",ref_key:"bayarBtnRef",ref:Z,onClick:Be,disabled:r.value.length===0||!c.value,class:"md:col-span-2 h-14 btn-submit text-xl font-bold rounded-xl flex items-center justify-center gap-2 shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-md"},t[12]||(t[12]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),a("span",null,"BAYAR SEKARANG",-1)]),8,Ht),a("button",{type:"button",onClick:se(Ne,["prevent"]),disabled:r.value.length===0||!c.value,class:"btn-pending h-14 font-semibold rounded-xl flex items-center justify-center gap-2 transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-none"},t[13]||(t[13]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),a("span",null,"Simpan",-1)]),8,qt)])])])]),Y.value?(p(),g("div",Lt,[a("div",{class:"absolute inset-0 bg-black bg-opacity-60",onClick:ee}),a("div",Ft,[a("div",{class:"flex justify-between items-center border-b pb-3 mb-2"},[t[15]||(t[15]=a("h3",{class:"text-2xl font-bold text-title"},"Proses Pembayaran",-1)),a("button",{onClick:ee,class:"text-gray-500 hover:text-red-500"},t[14]||(t[14]=[a("svg",{class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",Ot,[a("div",null,[t[17]||(t[17]=a("label",{class:"block text-2xl font-medium label-text mb-2"},[pe(" Jumlah Bayar "),a("span",{class:"text-danger"},"*")],-1)),a("div",Ut,[t[16]||(t[16]=a("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-semibold text-muted"},"Rp",-1)),a("input",{ref_key:"pembayaranInputRef",ref:Q,value:K.value||m.value||"",onInput:he,onFocus:ye,onBlur:ke,onKeydown:ce(_e,["enter"]),type:"text",required:"",placeholder:"0",class:"input-field w-full h-14 pl-12 pr-4 rounded-lg border transition text-3xl font-bold",autofocus:""},null,40,Vt)])]),a("div",Gt,[a("div",Yt,[t[18]||(t[18]=a("span",{class:"text-muted"},"Pelanggan:",-1)),a("span",Jt,l(Ce(c.value)),1)]),a("div",Wt,[t[19]||(t[19]=a("span",{class:"text-muted"},"Hutang Lama:",-1)),a("span",{class:D(["font-semibold",k.value>0?"text-danger":"text-success"])},l(d(k.value)),3)]),a("div",Qt,[t[20]||(t[20]=a("span",{class:"text-muted"},"Total Belanja:",-1)),a("span",Xt,l(d(w.value)),1)]),a("div",{class:D(["flex justify-between text-base border-t pt-3 border-divider",W.value>0?"text-orange-custom":"text-body"])},[t[21]||(t[21]=a("span",{class:"text-muted"},"Total yang Harus Dibayar:",-1)),a("span",Zt,l(d(W.value)),1)],2),a("div",ea,[t[22]||(t[22]=a("span",{class:"text-muted"},"Uang Bayar:",-1)),a("span",ta,l(d(m.value)),1)]),a("div",{class:D(["flex justify-between text-2xl border-t pt-3 border-divider font-bold",C.value>=0?"text-success":"text-danger"])},[a("span",null,l(C.value>=0?"Kembalian":"Sisa Hutang"),1),a("span",null,l(d(Math.abs(C.value))),1)],2)])]),a("div",aa,[a("button",{ref_key:"submitButtonRef",ref:X,type:"submit",onClick:se(Ke,["prevent"]),disabled:N.value||w.value===0,class:"w-full h-14 btn-submit text-xl font-bold rounded-lg flex items-center justify-center gap-2 shadow-lg transition transform hover:scale-[1.01]"},[N.value?(p(),g("svg",sa,t[23]||(t[23]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):j("",!0),pe(" "+l(N.value?"Memproses...":"PROSES TRANSAKSI (ENTER)"),1)],8,na)])])])):j("",!0)]),_:1}))}}),ca=Je(oa,[["__scopeId","data-v-f2b7f845"]]);export{ca as default};
