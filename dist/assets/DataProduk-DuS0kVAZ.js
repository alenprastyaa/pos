import{j as _e,r as n,y as V,c as we,o as je,A as le,b as g,a as Be,w as Ce,d as a,f as m,t as u,p as P,v as $,e as p,q as w,h as X,F as Y,x as se,z as oe,i as Pe}from"./index-i101KXS0.js";import{a as j,S as c}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Fe}from"./AdminLayout-sU2sZCzy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Te={class:"space-y-6"},Me={class:"flex items-center justify-between"},De={class:"flex items-center gap-3"},Ee=["disabled"],Ue={class:"flex gap-4"},Ie={class:"flex-1"},Se={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},Ve={class:"max-w-full overflow-x-auto custom-scrollbar"},$e={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ae={class:"border-b border-gray-200 dark:border-gray-700"},He={key:0,class:"px-5 py-3 text-left sm:px-6"},Ne={class:"divide-y divide-gray-200 dark:divide-gray-700"},Re={key:0,class:"border-t border-gray-100 dark:border-gray-800"},qe=["colspan"],Ge={key:1,class:"border-t border-gray-100 dark:border-gray-800"},Le=["colspan"],Je={class:"px-5 py-4 sm:px-6"},ze={class:"text-gray-800 text-theme-sm dark:text-white/90"},Ke={class:"px-5 py-4 sm:px-6"},Qe={class:"text-gray-800 font-medium text-theme-sm dark:text-white/90"},Oe={class:"px-5 py-4 sm:px-6"},We={class:"text-gray-500 text-theme-sm dark:text-gray-400"},Xe={class:"px-5 py-4 sm:px-6"},Ye={class:"text-gray-800 text-theme-sm dark:text-white/90"},Ze={class:"px-5 py-4 sm:px-6"},ea={class:"text-gray-800 text-theme-sm dark:text-white/90"},aa={class:"px-5 py-4 sm:px-6"},ta={class:"text-gray-800 text-theme-sm dark:text-white/90"},ra={class:"px-5 py-4 sm:px-6"},la={class:"text-gray-800 text-theme-sm dark:text-white/90"},sa={key:0,class:"px-5 py-4 sm:px-6"},oa={class:"text-gray-500 text-theme-sm dark:text-gray-400"},da={class:"px-5 py-4 sm:px-6"},na={class:"flex gap-2"},ia=["onClick"],ua=["onClick"],ga={class:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700"},pa={class:"text-sm text-gray-600 dark:text-gray-400"},ca={key:0,class:"flex items-center space-x-2"},xa=["disabled"],ma={class:"text-sm text-gray-700 dark:text-gray-300"},ba=["disabled"],ka={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},ha={class:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-lg p-6"},ya={class:"flex items-center justify-between mb-4"},va={class:"text-xl font-semibold text-gray-900 dark:text-white"},fa=["disabled"],_a={class:"grid grid-cols-3 gap-4"},wa=["value"],ja=["value"],Ba=["value"],Ca={key:0,class:"pt-2"},Pa=["value"],Fa={key:0,class:"text-xs text-gray-500 mt-1"},Ta={class:"flex gap-3 pt-4"},Ma=["disabled"],Da={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Ea={class:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md p-6"},Ua={key:0,class:"pt-2"},Ia=["value"],Sa={key:1,class:"pt-2"},Va={class:"text-sm text-gray-600 dark:text-gray-400"},$a={class:"font-semibold"},Aa={class:"flex gap-3 pt-4"},Ha=["disabled"],Ja=_e({__name:"DataProduk",setup(Na){const de=Pe(),y="https://alentest.my.id/pos",h=n(null),F=n([]),B=n([]),A=n(!1),H=n(!1),E=n(!1),T=n(!1),x=n(!1),N=n(""),R=n(""),Z=n(null);V(()=>T.value,t=>{t&&!x.value&&le(()=>{var e;(e=Z.value)==null||e.focus()})});const d=n({total:0,current_page:1,per_page:10,total_pages:1}),q={nama_produk:"",barcode:"",stok_produk:0,harga_beli:0,harga_jual_ritel:0,harga_jual_biasa:0,toko_id:""},l=n({...q}),U=n(!1),G=n(!1),I=n(!1),M=n(null),C=n(null),v=n(""),i=we(()=>{var t;return((t=h.value)==null?void 0:t.role_name)==="superadmin"}),ee=(t,e)=>{let s;return function(...r){clearTimeout(s),s=setTimeout(()=>{t.apply(this,r)},e)}},f=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),L=t=>{if(t==null)return"Rp 0";const e=typeof t=="string"?parseFloat(t):t;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},ne=async()=>{try{const t=await j.get(`${y}/user/my/data`,{headers:f()});t.data.success&&(h.value=t.data.data)}catch(t){console.error("Fetch user data error:",t)}},J=async()=>{H.value=!0;try{const t=await j.get(`${y}/toko`,{headers:f()});t.data.success&&(B.value=t.data.data)}catch(t){console.error("Fetch Toko error:",t)}finally{H.value=!1}},_=async()=>{var t,e;A.value=!0;try{const s={page:d.value.current_page,per_page:d.value.per_page,search:N.value};i.value&&R.value&&(s.toko_id=R.value);const r=await j.get(`${y}/produk`,{params:s,headers:f()});if(r.data.success&&r.data.data){const o=r.data.data;F.value=o.data,d.value={total:o.total,current_page:o.current_page,per_page:o.per_page,total_pages:o.total_pages}}else F.value=[],d.value={total:0,current_page:1,per_page:d.value.per_page,total_pages:1}}catch(s){console.error("Fetch Product error:",s),c.fire({icon:"error",title:"Error",text:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Gagal mengambil data produk"}),de.push("/signin")}finally{A.value=!1}},ae=t=>{t>0&&t<=d.value.total_pages&&(d.value.current_page=t,_())},ie=ee(()=>{d.value.current_page=1,_()},300),ue=async()=>{var t;x.value=!1,l.value={...q},i.value&&B.value.length===0&&await J(),!i.value&&((t=h.value)!=null&&t.toko_id)&&(l.value.toko_id=h.value.toko_id),T.value=!0},ge=t=>{x.value=!0,l.value={id:t.id,nama_produk:t.nama_produk,barcode:t.barcode,stok_produk:t.stok_produk,harga_beli:parseFloat(t.harga_beli),harga_jual_ritel:parseFloat(t.harga_jual_ritel),harga_jual_biasa:parseFloat(t.harga_jual_biasa)},T.value=!0},z=()=>{T.value=!1,l.value={...q},x.value=!1},pe=()=>{var e;const t=l.value;return!t.nama_produk||!t.barcode?"Nama produk dan Barcode wajib diisi.":t.stok_produk<0?"Stok tidak boleh negatif.":t.harga_beli<=0||t.harga_jual_ritel<=0||t.harga_jual_biasa<=0?"Semua harga harus bernilai positif (> 0).":!x.value&&i.value&&!t.toko_id?"Toko tujuan wajib dipilih untuk produk baru oleh Super Admin.":!x.value&&!i.value&&!((e=h.value)!=null&&e.toko_id)?"Gagal menentukan toko Anda. Coba muat ulang halaman.":null},ce=async()=>{var s,r,o;const t=pe();if(t){c.fire({icon:"warning",title:"Validasi Gagal",text:t});return}E.value=!0;const e={nama_produk:l.value.nama_produk,barcode:l.value.barcode,stok_produk:l.value.stok_produk,harga_beli:l.value.harga_beli,harga_jual_ritel:l.value.harga_jual_ritel,harga_jual_biasa:l.value.harga_jual_biasa};x.value||(i.value&&l.value.toko_id?e.toko_id=l.value.toko_id:!i.value&&((s=h.value)!=null&&s.toko_id)&&(e.toko_id=h.value.toko_id));try{let b,k=`${y}/produk`;x.value?(k=`${y}/produk/${l.value.id}`,b=await j.put(k,e,{headers:f()})):b=await j.post(k,e,{headers:f()}),b.data.success&&(await c.fire({icon:"success",title:"Berhasil",text:b.data.message||`Produk berhasil di${x.value?"ubah":"tambah"}`,timer:1500}),z(),_())}catch(b){console.error("Submit error:",b),c.fire({icon:"error",title:`Error ${x.value?"Update":"Tambah"}`,text:((o=(r=b.response)==null?void 0:r.data)==null?void 0:o.message)||"Gagal menyimpan data produk"})}finally{E.value=!1}},xe=t=>{c.fire({title:"Hapus Produk?",text:"Data produk akan dihapus secara permanen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&me(t)})},me=async t=>{var e,s;try{const r=await j.delete(`${y}/produk/${t}`,{headers:f()});r.data.success&&(await c.fire({icon:"success",title:"Berhasil",text:r.data.message||"Produk berhasil dihapus",timer:1500}),_())}catch(r){console.error("Delete error:",r),c.fire({icon:"error",title:"Error",text:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal menghapus produk"})}},be=async()=>{var t,e,s;U.value=!0;try{const r=await j.get(`${y}/produk/download/excel`,{headers:f()});if(r.data.success&&((t=r.data.data)!=null&&t.path)){const o=r.data.data.path,b=r.data.data.originalName||"products.xlsx",k=document.createElement("a");k.href=o,k.setAttribute("download",b),document.body.appendChild(k),k.click(),document.body.removeChild(k),c.fire("Berhasil","File Excel berhasil dibuat dan akan diunduh.","success")}else throw new Error("Respons tidak valid atau path download tidak ditemukan.")}catch(r){console.error("Download error:",r),c.fire("Error",((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal mendownload file Excel produk.","error")}finally{U.value=!1}},ke=async()=>{var t;C.value=null,M.value&&(M.value.value=""),i.value&&B.value.length===0&&await J(),i.value&&B.value.length>0&&(v.value=B.value[0].id),!i.value&&((t=h.value)!=null&&t.toko_id)&&(v.value=h.value.toko_id),G.value=!0},K=()=>{G.value=!1,C.value=null,M.value&&(M.value.value=""),v.value=""},he=t=>{const e=t.target;e.files&&e.files.length>0?C.value=e.files[0]:C.value=null},ye=async()=>{var e,s,r;if(!C.value){c.fire("Peringatan","Mohon pilih file Excel untuk diunggah.","warning");return}if(i.value&&!v.value){c.fire("Peringatan","Super Admin wajib memilih Toko Tujuan.","warning");return}if(!i.value&&!((e=h.value)!=null&&e.toko_id)){c.fire("Error","Data toko Anda tidak termuat. Coba muat ulang halaman.","error");return}I.value=!0;const t=new FormData;t.append("file",C.value),v.value&&t.append("toko_id",v.value);try{const o=await j.post(`${y}/produk/excel/upload-excel`,t,{headers:{...f(),"Content-Type":"multipart/form-data"}});if(o.data.success)await c.fire({icon:"success",title:"Upload Berhasil",text:o.data.message||"Produk berhasil diunggah dari Excel.",timer:2e3}),K(),_();else throw new Error(o.data.message||"Terjadi kesalahan saat mengunggah file.")}catch(o){console.error("Upload error:",o),c.fire({icon:"error",title:"Upload Gagal",text:((r=(s=o.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal mengunggah file Excel produk."})}finally{I.value=!1}};V(N,()=>{ie()},{immediate:!1}),V(R,()=>{d.value.current_page=1,_()},{immediate:!1});const D=t=>{if(!t)return"";const e=typeof t=="string"?parseFloat(t.replace(/\D/g,"")):t;return isNaN(e)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},te=t=>{const e=parseInt(t.replace(/\D/g,""),10);return isNaN(e)?0:e},Q=(t,e)=>{const s=t.target,r=s.value.replace(/\D/g,""),o=parseInt(r,10)||0;e==="harga_beli"?l.value.harga_beli=o:e==="harga_jual_ritel"?l.value.harga_jual_ritel=o:e==="harga_jual_biasa"&&(l.value.harga_jual_biasa=o),s.value=o>0?D(o):""},O=(t,e)=>{const s=t.target,r=te(s.value);e==="harga_beli"?l.value.harga_beli=r:e==="harga_jual_ritel"?l.value.harga_jual_ritel=r:e==="harga_jual_biasa"&&(l.value.harga_jual_biasa=r),s.value=r>0?D(r):""},W=t=>{const e=t.target,s=te(e.value);e.value=s.toString()},S=n(""),re=n(null);V(S,()=>{d.value.current_page=1,ve()},{immediate:!1});const ve=ee(()=>{N.value=S.value,_()},500);return je(async()=>{await ne(),i.value&&await J(),await _(),le(()=>{var t;(t=re.value)==null||t.focus()})}),(t,e)=>(g(),Be(Fe,null,{default:Ce(()=>{var s;return[a("div",Te,[a("div",Me,[e[17]||(e[17]=a("div",null,[a("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-white"}," Data Produk "),a("p",{class:"text-gray-600 dark:text-gray-400"}," Kelola inventaris produk dan harga di semua toko. ")],-1)),a("div",De,[a("button",{onClick:be,class:"flex items-center gap-2 px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition dark:bg-blue-500/15 dark:text-blue-400",disabled:U.value},[e[14]||(e[14]=a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),m(" "+u(U.value?"Mempersiapkan...":"Download Excel"),1)],8,Ee),a("button",{onClick:ke,class:"flex items-center gap-2 px-4 py-2 text-emerald-600 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition dark:bg-emerald-500/15 dark:text-emerald-400"},e[15]||(e[15]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),m(" Upload Excel ")])),a("button",{onClick:ue,class:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition"},e[16]||(e[16]=[a("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M10 4V16M4 10H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),m(" Tambah Produk ")]))])]),a("div",Ue,[a("div",Ie,[P(a("input",{ref_key:"barcodeInputFocus",ref:re,"onUpdate:modelValue":e[0]||(e[0]=r=>S.value=r),type:"text",placeholder:"Cari produk (nama/barcode)...",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,512),[[$,S.value]])])]),a("div",Se,[a("div",Ve,[a("table",$e,[a("thead",null,[a("tr",Ae,[e[19]||(e[19]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"No")],-1)),e[20]||(e[20]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Nama Produk ")],-1)),e[21]||(e[21]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Barcode")],-1)),e[22]||(e[22]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Stok")],-1)),e[23]||(e[23]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Harga Beli")],-1)),e[24]||(e[24]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Harga Jual Ritel")],-1)),e[25]||(e[25]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Harga Jual Biasa")],-1)),i.value?(g(),p("th",He,e[18]||(e[18]=[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Toko",-1)]))):w("",!0),e[26]||(e[26]=a("th",{class:"px-5 py-3 text-left sm:px-6"},[a("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Aksi")],-1))])]),a("tbody",Ne,[A.value?(g(),p("tr",Re,[a("td",{colspan:i.value?9:8,class:"px-5 py-4 text-center sm:px-6"},e[27]||(e[27]=[a("p",{class:"text-gray-500"},"Memuat data...",-1)]),8,qe)])):F.value.length===0?(g(),p("tr",Ge,[a("td",{colspan:i.value?9:8,class:"px-5 py-4 text-center sm:px-6"},e[28]||(e[28]=[a("p",{class:"text-gray-500"},"Tidak ada data produk",-1)]),8,Le)])):w("",!0),(g(!0),p(Y,null,X(F.value,(r,o)=>{var b,k;return g(),p("tr",{key:r.id,class:"border-t border-gray-100 dark:border-gray-800"},[a("td",Je,[a("p",ze,u((d.value.current_page-1)*d.value.per_page+o+1),1)]),a("td",Ke,[a("p",Qe,u(r.nama_produk),1)]),a("td",Oe,[a("p",We,u(r.barcode),1)]),a("td",Xe,[a("p",Ye,u(r.stok_produk),1)]),a("td",Ze,[a("p",ea,u(L(r.harga_beli)),1)]),a("td",aa,[a("p",ta,u(L(r.harga_jual_ritel)),1)]),a("td",ra,[a("p",la,u(L(r.harga_jual_biasa)),1)]),i.value?(g(),p("td",sa,[a("p",oa,u(((k=(b=r.user)==null?void 0:b.toko)==null?void 0:k.nama_toko)||"N/A"),1)])):w("",!0),a("td",da,[a("div",na,[a("button",{onClick:fe=>ge(r),class:"px-3 py-1 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition dark:bg-blue-500/15 dark:text-blue-400"}," Edit ",8,ia),a("button",{onClick:fe=>xe(r.id),class:"px-3 py-1 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition dark:bg-red-500/15 dark:text-red-400"}," Hapus ",8,ua)])])])}),128))])])]),a("div",ga,[a("p",pa," Menampilkan "+u(F.value.length)+" dari "+u(d.value.total)+" data. ",1),d.value.total_pages>1?(g(),p("div",ca,[a("button",{onClick:e[1]||(e[1]=r=>ae(d.value.current_page-1)),disabled:d.value.current_page===1,class:"px-3 py-1 text-sm rounded-lg border border-gray-300 dark:border-gray-700 dark:bg-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-600 transition"}," Sebelumnya ",8,xa),a("span",ma," Halaman "+u(d.value.current_page)+" dari "+u(d.value.total_pages),1),a("button",{onClick:e[2]||(e[2]=r=>ae(d.value.current_page+1)),disabled:d.value.current_page===d.value.total_pages,class:"px-3 py-1 text-sm rounded-lg border border-gray-300 dark:border-gray-700 dark:bg-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-600 transition"}," Berikutnya ",8,ba)])):w("",!0)])]),T.value?(g(),p("div",ka,[a("div",ha,[a("div",ya,[a("h2",va,u(x.value?"Edit Produk":"Tambah Produk Baru"),1),a("button",{onClick:z,class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},e[29]||(e[29]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),a("form",{onSubmit:se(ce,["prevent"]),class:"space-y-4"},[a("div",null,[e[30]||(e[30]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Barcode"),a("span",{class:"text-red-500"},"*")],-1)),P(a("input",{ref_key:"barcodeInput",ref:Z,"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.barcode=r),type:"text",placeholder:"Masukkan barcode",required:"",disabled:x.value,class:"h-11 w-full focus rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 disabled:bg-gray-100 dark:disabled:bg-gray-800"},null,8,fa),[[$,l.value.barcode]])]),a("div",null,[e[31]||(e[31]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Nama Produk"),a("span",{class:"text-red-500"},"*")],-1)),P(a("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>l.value.nama_produk=r),type:"text",placeholder:"Masukkan nama produk",required:"",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,512),[[$,l.value.nama_produk]])]),a("div",null,[e[32]||(e[32]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Stok Produk"),a("span",{class:"text-red-500"},"*")],-1)),P(a("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>l.value.stok_produk=r),type:"number",min:"0",placeholder:"Stok awal",required:"",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,512),[[$,l.value.stok_produk,void 0,{number:!0}]])]),a("div",_a,[a("div",null,[e[33]||(e[33]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Harga Beli"),a("span",{class:"text-red-500"},"*")],-1)),a("input",{type:"text",placeholder:"Harga Beli",required:"",value:l.value.harga_beli>0?D(l.value.harga_beli):"",onInput:e[6]||(e[6]=r=>Q(r,"harga_beli")),onFocus:W,onBlur:e[7]||(e[7]=r=>O(r,"harga_beli")),class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,40,wa)]),a("div",null,[e[34]||(e[34]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Jual Ritel"),a("span",{class:"text-red-500"},"*")],-1)),a("input",{type:"text",placeholder:"Harga Jual Ritel",required:"",value:l.value.harga_jual_ritel>0?D(l.value.harga_jual_ritel):"",onInput:e[8]||(e[8]=r=>Q(r,"harga_jual_ritel")),onFocus:W,onBlur:e[9]||(e[9]=r=>O(r,"harga_jual_ritel")),class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,40,ja)]),a("div",null,[e[35]||(e[35]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Jual Biasa"),a("span",{class:"text-red-500"},"*")],-1)),a("input",{type:"text",placeholder:"Harga Jual Biasa",required:"",value:l.value.harga_jual_biasa>0?D(l.value.harga_jual_biasa):"",onInput:e[10]||(e[10]=r=>Q(r,"harga_jual_biasa")),onFocus:W,onBlur:e[11]||(e[11]=r=>O(r,"harga_jual_biasa")),class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,40,Ba)])]),i.value&&!x.value?(g(),p("div",Ca,[e[37]||(e[37]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Toko Tujuan"),a("span",{class:"text-red-500"},"*")],-1)),P(a("select",{"onUpdate:modelValue":e[12]||(e[12]=r=>l.value.toko_id=r),required:"",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},[e[36]||(e[36]=a("option",{value:"",disabled:""},"Pilih Toko",-1)),(g(!0),p(Y,null,X(B.value,r=>(g(),p("option",{key:r.id,value:r.id},u(r.nama_toko),9,Pa))),128))],512),[[oe,l.value.toko_id]]),H.value?(g(),p("p",Fa,"Memuat data toko...")):w("",!0)])):w("",!0),a("div",Ta,[a("button",{type:"button",onClick:z,class:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 transition"}," Batal "),a("button",{type:"submit",disabled:E.value,class:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},u(E.value?"Menyimpan...":"Simpan"),9,Ma)])],32)])])):w("",!0),G.value?(g(),p("div",Da,[a("div",Ea,[a("div",{class:"flex items-center justify-between mb-4"},[e[39]||(e[39]=a("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Upload Produk via Excel ",-1)),a("button",{onClick:K,class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},e[38]||(e[38]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),a("form",{onSubmit:se(ye,["prevent"]),class:"space-y-4"},[a("div",null,[e[40]||(e[40]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Pilih File (.xlsx)"),a("span",{class:"text-red-500"},"*")],-1)),a("input",{type:"file",ref_key:"fileInput",ref:M,onChange:he,accept:".xlsx, .xls",required:"",class:"w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"},null,544),e[41]||(e[41]=a("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-300"}," **Pastikan format header kolom sesuai dengan template.** ",-1))]),i.value?(g(),p("div",Ua,[e[43]||(e[43]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[m(" Toko Tujuan Upload"),a("span",{class:"text-red-500"},"*")],-1)),P(a("select",{"onUpdate:modelValue":e[13]||(e[13]=r=>v.value=r),required:"",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},[e[42]||(e[42]=a("option",{value:"",disabled:""},"Pilih Toko",-1)),(g(!0),p(Y,null,X(B.value,r=>(g(),p("option",{key:r.id,value:r.id},u(r.nama_toko),9,Ia))),128))],512),[[oe,v.value]])])):(g(),p("div",Sa,[a("p",Va,[e[44]||(e[44]=m("Produk akan diupload ke toko Anda: ")),a("span",$a,u(((s=h.value)==null?void 0:s.toko.nama_toko)||"Memuat..."),1)])])),a("div",Aa,[a("button",{type:"button",onClick:K,class:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 transition"}," Batal "),a("button",{type:"submit",disabled:I.value||!C.value,class:"flex-1 px-4 py-2 text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},u(I.value?"Mengunggah...":"Upload Data"),9,Ha)])],32)])])):w("",!0)])]}),_:1}))}});export{Ja as default};
