import{j as Ia,r as o,c as F,y as Da,o as Sa,b as g,a as Aa,w as Na,d as t,p as Q,v as ra,u as za,e as p,F as V,h as U,q as D,z as Ma,n as S,t as s,f as W,x as na,A as sa}from"./index-Cjag85Jx.js";import{a as E,S as u}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Ha}from"./AdminLayout-DHZApuQs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const qa={class:"py-6 space-y-6 bg-gray-50 dark:bg-gray-950 min-h-screen"},Ea={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ka={class:"lg:col-span-2 relative"},Ra=["disabled"],La={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-10 max-h-64 overflow-y-auto"},Fa=["onClick"],Va={class:"font-medium text-gray-900 dark:text-gray-100"},Ua={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ga={key:0,disabled:""},Oa=["value"],Ya={key:0,class:"p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg"},Ja={class:"flex justify-between items-center"},Qa={key:1,class:"space-y-3"},Wa={class:"flex items-center gap-2"},Xa={class:"text-sm font-bold text-gray-900 dark:text-gray-100"},Za={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},ae={class:"mb-3"},ee={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},te={class:"text-lg font-bold text-amber-600 dark:text-amber-500 mt-1"},re={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},ne={class:"flex gap-2 justify-end"},se=["onClick"],oe=["onClick"],le={class:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden"},ie={class:"overflow-x-auto"},de={class:"w-full"},ue={class:"divide-y divide-gray-100 dark:divide-gray-800"},ge={key:0},ce={class:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100 font-medium"},pe={class:"px-6 py-4"},ye={class:"font-medium text-gray-900 dark:text-gray-100"},me={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},be={class:"px-6 py-4 text-center"},xe=["onUpdate:modelValue","onChange"],ve={class:"px-6 py-4 text-right text-sm text-gray-700 dark:text-gray-300"},fe={class:"px-6 py-4 text-right text-sm font-semibold text-gray-900 dark:text-gray-100"},ke={class:"px-6 py-4 text-center"},he=["onClick"],_e={class:"px-6 py-4 bg-gray-100 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center"},we={class:"text-2xl font-bold text-cyan-600 dark:text-cyan-500"},Te={class:"space-y-4"},je={class:"relative"},Be=["value"],Pe={class:"p-5 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg space-y-3"},Ce={class:"flex justify-between text-sm"},$e={class:"flex justify-between text-sm"},Ie={class:"font-semibold text-gray-900 dark:text-gray-100"},De={class:"flex justify-between text-sm border-t border-gray-200 dark:border-gray-700 pt-3"},Se={class:"font-semibold text-gray-900 dark:text-gray-100"},Ae={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ne=["disabled"],ze=["disabled"],Me={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},oa="pendingTransactions",Le=Ia({__name:"PenjualanGrosir",setup(He){const A="https://alentest.my.id/pos",h=o(0),la=localStorage.getItem("role_name"),m=o(-1),G=o([]),O=o(!1),N=o(!1),c=o(""),y=o(0),ia=o(""),K=o(null),i=o([]),v=o([]),T=o(null),j=o(null),R=o(""),f=o([]),B=o(!1),z=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),da=F(()=>{var a;return((a=j.value)==null?void 0:a.role_name)==="superadmin"});o([]);const ua=o("");o(!1);const L=o(""),Y=F(()=>{const a=Number(h.value)||0,e=Number(_.value)||0;return a+e}),ga=a=>{/\d/.test(a.key)&&a.preventDefault()},ca=a=>{const e=a.replace(/\D/g,""),r=parseInt(e)||0;y.value=r,e===""?L.value="":L.value=new Intl.NumberFormat("id-ID").format(r)},pa=a=>{const e=a.target;ca(e.value)},ya=a=>{const e=a.target;y.value>0&&(e.value=y.value.toString())},ma=a=>{const e=a.target;y.value>0&&(e.value=L.value)},ba=async a=>{if(!a.trim()){f.value=[],B.value=!1;return}try{const e=await E.get(`${A}/produk`,{params:{search:a},headers:z()});e.data.success&&e.data.data.data&&(f.value=e.data.data.data.map(r=>({barcode:r.barcode,qty:1,nama_produk:r.nama_produk,harga_jual_ritel:parseFloat(r.harga_jual_ritel)})),B.value=!0,m.value=-1)}catch(e){console.error("Error searching products:",e),f.value=[]}},xa=a=>{if(!(!B.value||f.value.length===0))switch(a.key){case"ArrowDown":a.preventDefault(),m.value=Math.min(m.value+1,f.value.length-1);break;case"ArrowUp":a.preventDefault(),m.value=Math.max(m.value-1,-1);break;case"Enter":a.preventDefault(),m.value>=0&&X(f.value[m.value]);break;case"Escape":a.preventDefault(),B.value=!1,m.value=-1;break}},X=async a=>{const e=await $a(a);e!==null&&(ha(a,e),u.fire({icon:"success",title:"Berhasil",text:`${e} ${a.nama_produk} ditambahkan`,timer:1500,showConfirmButton:!1})),R.value="",f.value=[],B.value=!1,m.value=-1,sa(()=>{var r;(r=K.value)==null||r.focus()})},l=a=>a==null||isNaN(a)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),va=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=F(()=>i.value.reduce((a,e)=>a+e.qty*e.harga_jual_ritel,0)),P=F(()=>{const a=Number(y.value)||0,e=Number(Y.value)||0;return a-e}),fa=async()=>{try{const a=await E.get(`${A}/user/my/data`,{headers:z()});a.data.success&&(j.value={full_name:a.data.data.full_name,role_name:a.data.data.role_name,toko:{id:a.data.data.toko.id,nama_toko:a.data.data.toko.nama_toko,alamat:a.data.data.toko.alamat}})}catch(a){console.error("Gagal mengambil data kasir:",a)}},Z=async a=>{try{const e=await E.get(`${A}/pelanggan/${a}`,{headers:z()});e.data.success&&e.data.data&&(h.value=Number(e.data.data.hutang)||0)}catch(e){console.error("Gagal mengambil hutang pelanggan:",e),h.value=0}};Da(c,async a=>{a?await Z(a):h.value=0});const ka=async()=>{O.value=!0;try{const a=await E.get(`${A}/pelanggan`,{headers:z()});a.data.success&&(G.value=a.data.data)}catch(a){console.error("Gagal mengambil data pelanggan:",a)}finally{O.value=!1}},J=()=>{c.value="",y.value=0,i.value=[],ia.value="",T.value=null,sa(()=>{var a;(a=K.value)==null||a.focus()})},ha=(a,e=1)=>{const r=i.value.find(n=>n.barcode===a.barcode);r?(r.qty+=e,i.value=[r,...i.value.filter(n=>n.barcode!==a.barcode)]):i.value.unshift({barcode:a.barcode,qty:e,nama_produk:a.nama_produk,harga_jual_ritel:parseFloat(a.harga_jual_ritel)})},_a=(a,e)=>{const r=i.value.find(n=>n.barcode===a);r&&(e<=0||isNaN(e)?aa(a):r.qty=e)},aa=a=>{i.value=i.value.filter(e=>e.barcode!==a)},ea=()=>{try{localStorage.setItem(oa,JSON.stringify(v.value))}catch(a){console.error("Error saving pending transactions:",a)}},wa=()=>{try{const a=localStorage.getItem(oa);v.value=a?JSON.parse(a):[]}catch(a){console.error("Error loading pending transactions:",a),v.value=[]}},Ta=async()=>{if(i.value.length===0){u.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!c.value){u.fire("Peringatan","Pelanggan harus dipilih untuk menyimpan transaksi pending.","warning");return}const a=G.value.find(n=>n.id===c.value),e=a?a.nama_pelanggan:"Pelanggan Tidak Dikenal",r={id:Date.now(),pelanggan_id:c.value,nama_pelanggan:e,items:[...i.value],tanggal_simpan:new Date().toLocaleString("id-ID"),total:_.value};v.value.push(r),ea(),u.fire("Berhasil","Transaksi telah disimpan sebagai pending.","success"),J()},ja=a=>{J(),c.value=a.pelanggan_id,i.value=a.items,y.value=0,T.value=a.id,u.fire("Dimuat",`Transaksi untuk ${a.nama_pelanggan} telah dimuat ke keranjang.`,"info")},ta=(a,e=!0)=>{v.value=v.value.filter(r=>r.id!==a),ea(),e&&u.fire("Berhasil","Transaksi pending telah dihapus.","success")},Ba=(a,e,r,n,b,C)=>{const $=a.total_bayar,d=a.total_harga,w=a.total_kembalian,I=a.sisa_hutang,k=x=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(x);return`
        <div style="width: 280px; font-family: monospace; font-size: 12px; padding: 10px; text-align: center;">
            <div style="margin-bottom: 10px;">
                <div style="font-weight: bold; font-size: 14px; margin-bottom: 5px;">${b.toUpperCase()}</div>
                <div style="font-size: 11px; line-height: 1.4;">
                    ${C.replace(/\n/g,"<br>")}
                </div>
            </div>

            <div style="border-top: 2px dashed #000; border-bottom: 2px dashed #000; padding: 8px 0; margin: 8px 0;">
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 3px;">
                    <span><strong>ID:</strong> ${a.id.substring(0,8)}</span>
                    <span><strong>Kasir:</strong> ${n}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                    <span><strong>Tanggal:</strong></span>
                    <span>${va(a.createdAt)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 3px;">
                    <span><strong>Pelanggan:</strong></span>
                    <span>${e}</span>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; margin: 8px 0 4px 0; border-bottom: 1px dashed #000; padding-bottom: 4px;">
                <span style="flex: 1; text-align: left;">ITEM</span>
                <span style="width: 30px; text-align: center;">QTY</span>
                <span style="width: 50px; text-align: right;">HARGA</span>
                <span style="width: 50px; text-align: right;">TOTAL</span>
            </div>

            <div>
                ${r.map(x=>`
                    <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 4px;">
                        <span style="flex: 1; text-align: left; word-break: break-word;">${x.nama_produk}</span>
                        <span style="width: 30px; text-align: center;">${x.qty}</span>
                        <span style="width: 50px; text-align: right;">${k(x.harga_jual_ritel)}</span>
                        <span style="width: 50px; text-align: right;">${k(x.qty*x.harga_jual_ritel)}</span>
                    </div>
                `).join("")}
            </div>

            <div style="border-top: 2px dashed #000; margin: 8px 0; padding-top: 8px;">
    <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; margin-bottom: 4px;">
        <span>TOTAL BELANJA:</span>
        <span>Rp ${k(d)}</span>
    </div>

    <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 2px;">
        <span>Tunai:</span>
        <span>Rp ${k($)}</span>
    </div>
    
    ${w>0?`
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; color: #2ecc71;">
            <span>Kembali:</span>
            <span>Rp ${k(w)}</span>
        </div>
    `:""}

    ${I>0?`
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; color: #e74c3c; margin-top: 5px;">
            <span>SISA HUTANG:</span>
            <span>Rp ${k(I)}</span>
        </div>
    `:""}
    </div>


            <div style="margin-top: 10px; font-size: 11px; line-height: 1.6;">
                <div>Terima Kasih Atas Kunjungan Anda</div>
                <div>Periksa barang sebelum dibeli</div>
                <div style="font-size: 10px; color: #666;">Barang yang sudah dibeli<br>tidak bisa ditukar atau dikembalikan</div>
            </div>
        </div>
    `},Pa=(a,e,r,n,b,C)=>{const $=Ba(a,e,r,n,b,C),d=window.open("","","width=350,height=700,scrollbars=yes");if(!d){u.fire("Error","Gagal membuka jendela cetak. Periksa setelan pop-up browser Anda.","error");return}d.document.write(`
        <!DOCTYPE html>
        <html>
            <head>
                <meta charset="UTF-8">
                <title>Struk Transaksi ${a.id.substring(0,8)}</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        font-family: 'Courier New', monospace; 
                        font-size: 12px;
                        background: #f5f5f5;
                        padding: 10px;
                    }
                    @media print {
                        body { padding: 0; background: white; }
                        @page { margin: 0; size: 80mm auto; }
                    }
                </style>
            </head>
            <body onload="window.print(); setTimeout(() => window.close(), 500);">
                ${$}
            </body>
        </html>
    `),d.document.close()},Ca=async()=>{var C,$;if(!c.value){u.fire("Peringatan","Pelanggan harus dipilih.","warning");return}if(i.value.length===0){u.fire("Peringatan","Keranjang belanja kosong.","warning");return}if(!j.value){u.fire("Error","Data kasir/toko belum dimuat. Mohon refresh halaman atau cek koneksi API.","error");return}if(da.value&&!ua.value){u.fire("Peringatan","Toko harus dipilih untuk melakukan penjualan.","warning");return}if(!(await u.fire({icon:"question",title:"Konfirmasi Transaksi",html:`<div class="text-left">
                   <p class="mb-3"><strong>Total Belanja:</strong> ${l(_.value)}</p>
                   <p class="mb-3"><strong>Uang Bayar:</strong> ${l(y.value)}</p>
                   <p class="mb-4"><strong>Kembalian/Hutang:</strong> <span class="${P.value<0?"text-red-600 font-bold":"text-green-600 font-bold"}">${l(Math.abs(P.value))}</span></p>
                   <hr class="my-3">
                   <p class="text-sm text-gray-600">Periksa kembali data di atas sebelum melanjutkan.</p>
               </div>`,showCancelButton:!0,confirmButtonText:"Ya, Lanjutkan",cancelButtonText:"Batalkan",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return;const e=P.value;if(e<0){const d=Math.abs(e);if(!(await u.fire({icon:"warning",title:"Kurang Bayar!",html:`<p>Pembayaran <strong>kurang</strong> sebesar <strong>${l(d)}</strong>.</p>
                   <p class="mt-2 text-red-500 font-semibold">Transaksi ini akan dicatat sebagai <strong>Hutang</strong>.</p>
                   <p class="text-sm mt-3">Lanjutkan proses transaksi?</p>`,showCancelButton:!0,confirmButtonText:"Ya, Catat Hutang",cancelButtonText:"Batalkan Transaksi",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)return}const r=[...i.value],n=i.value.map(d=>({barcode:d.barcode,qty:d.qty})),b={pelanggan_id:c.value,pembayaran:y.value,items:n};N.value=!0;try{const d=await E.post(`${A}/transaksi/create/ritel`,b,{headers:z()});if(d.data.success){const w=d.data.data.transaksi,I=w.sisa_hutang||0,k=w.total_kembalian||0,x=d.data.data.pelanggan.nama_pelanggan;Pa(w,x,r,j.value.full_name,j.value.toko.nama_toko,j.value.toko.alamat);let M,H,q;I>0?(q="warning",M="Transaksi Tercatat sebagai Hutang!",H=`<p class="text-lg font-bold mt-2">Pelanggan: ${x}</p>
                           <p class="text-xl font-bold mt-1 text-red-600">Sisa Hutang: ${l(I)}</p>`):I===0?k>0?(q="success",M="Transaksi Berhasil!",H=`<p class="text-lg font-bold mt-2">Total Belanja: ${l(_.value)}</p>
                               <p class="text-lg font-bold mt-1">Uang Bayar: ${l(y.value)}</p>
                               <p class="text-xl font-bold mt-2 text-green-600">Kembalian: ${l(k)}</p>`):(q="success",M="Transaksi Berhasil!",H='<p class="text-lg font-bold mt-2">Pembayaran Lunas Pas!</p>'):(q="error",M="Error Logika Transaksi!",H='<p class="text-lg font-bold mt-2">Terdeteksi error internal. Hubungi Admin.</p>'),u.fire({icon:q,title:M,html:H}),T.value!==null&&ta(T.value,!1),await Z(c.value),J()}else u.fire({icon:"error",title:"Transaksi Gagal",text:d.data.message||"Terjadi kesalahan saat memproses transaksi."})}catch(d){console.error("Error transaksi:",d),u.fire({icon:"error",title:"Error",text:(($=(C=d.response)==null?void 0:C.data)==null?void 0:$.message)||"Gagal terhubung ke server."})}finally{N.value=!1}},$a=async a=>{const e=await u.fire({title:"Jumlah Barang",html:`
            <p class="mb-3 text-gray-700">${a.nama_produk}</p>
            <input id="qty-input" type="number" min="1" value="1" 
                class="swal2-input w-full text-center text-lg font-semibold" 
                autofocus>
        `,showCancelButton:!0,confirmButtonText:"Tambahkan",cancelButtonText:"Batal",confirmButtonColor:"#0891b2",cancelButtonColor:"#6b7280",allowOutsideClick:!1,didOpen:()=>{const r=document.getElementById("qty-input");r==null||r.focus(),r==null||r.select()},preConfirm:()=>{const r=document.getElementById("qty-input"),n=parseInt(r.value);return!n||n<=0||isNaN(n)?(u.showValidationMessage("Masukkan jumlah yang valid (minimal 1)"),!1):n}});return e.isConfirmed&&e.value?e.value:null};return Sa(async()=>{var a;await fa(),await ka(),wa(),(a=K.value)==null||a.focus()}),(a,e)=>(g(),Aa(Ha,null,{default:Na(()=>[t("div",qa,[e[20]||(e[20]=t("div",{class:"border-b border-gray-200 dark:border-gray-800 pb-4"},[t("p",{class:"text-3xl font-bold dark:text-gray-50 tracking-tight uppercase text-red-600"}," Transaksi Penjualan Grosir ")],-1)),t("div",Ea,[t("div",Ka,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Cari Produk ",-1)),Q(t("input",{onKeypress:ga,ref_key:"barcodeInputRef",ref:K,"onUpdate:modelValue":e[0]||(e[0]=r=>R.value=r),type:"text",placeholder:"Ketik nama produk...",onInput:e[1]||(e[1]=r=>ba(R.value)),onKeydown:xa,disabled:za(la)!=="admin",class:"w-full h-11 px-4 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-cyan-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500 dark:disabled:bg-gray-800 dark:disabled:text-gray-400 transition"},null,40,Ra),[[ra,R.value]]),B.value&&f.value.length>0?(g(),p("div",La,[(g(!0),p(V,null,U(f.value,(r,n)=>(g(),p("div",{key:r.barcode,onClick:b=>X(r),class:S([n===m.value?"bg-yellow-300 dark:bg-cyan-900/20 border-l-4 border-cyan-500":"hover:bg-gray-50 dark:hover:bg-gray-800/50","p-3 cursor-pointer border-b border-gray-100 dark:border-gray-800 last:border-b-0 transition"])},[t("div",Va,s(r.nama_produk),1),t("div",Ua,s(r.barcode)+" â€¢ "+s(l(r.harga_jual_ritel)),1)],10,Fa))),128))])):D("",!0)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Pilih Pelanggan ",-1)),Q(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),required:"",class:"w-full h-11 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-4 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition"},[e[4]||(e[4]=t("option",{value:"",disabled:""},"Pilih Pelanggan...",-1)),O.value?(g(),p("option",Ga,"Memuat...")):D("",!0),(g(!0),p(V,null,U(G.value,r=>(g(),p("option",{key:r.id,value:r.id},s(r.nama_pelanggan),9,Oa))),128))],512),[[Ma,c.value]])])]),c.value?(g(),p("div",Ya,[t("div",Ja,[e[6]||(e[6]=t("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Hutang Pelanggan",-1)),t("span",{class:S(["text-2xl font-bold",h.value>0?"text-red-600 dark:text-red-500":"text-emerald-600 dark:text-emerald-500"])},s(l(h.value)),3)])])):D("",!0),v.value.length>0?(g(),p("div",Qa,[t("div",Wa,[e[7]||(e[7]=t("div",{class:"w-1 h-6 bg-amber-500 rounded"},null,-1)),t("p",Xa," Transaksi Pending ("+s(v.value.length)+") ",1)]),t("div",Za,[(g(!0),p(V,null,U(v.value,r=>(g(),p("div",{key:r.id,class:S(["p-4 bg-white dark:bg-gray-900 border-2 rounded-lg transition cursor-pointer",{"border-cyan-500 bg-yellow-300 dark:bg-cyan-900/10":r.id===T.value,"border-amber-200 dark:border-amber-800 hover:border-amber-400 dark:hover:border-amber-600":r.id!==T.value}])},[t("div",ae,[t("p",ee,s(r.nama_pelanggan),1),t("p",te,s(l(r.total)),1),t("p",re,s(r.tanggal_simpan),1)]),t("div",ne,[t("button",{onClick:n=>ja(r),class:"text-sm bg-cyan-600 hover:bg-cyan-700 text-white px-3 py-1.5 rounded-md font-medium transition"}," Muat ",8,se),t("button",{onClick:n=>ta(r.id),class:"text-sm bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 px-3 py-1.5 rounded-md font-medium transition"}," Hapus ",8,oe)])],2))),128))])])):D("",!0),t("div",le,[t("div",ie,[t("table",de,[e[10]||(e[10]=t("thead",null,[t("tr",{class:"bg-gray-100 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," No"),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Produk"),t("th",{class:"px-6 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Qty"),t("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Harga"),t("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Subtotal"),t("th",{class:"px-6 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"})])],-1)),t("tbody",ue,[i.value.length===0?(g(),p("tr",ge,e[8]||(e[8]=[t("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-400 dark:text-gray-500"},[t("div",{class:"space-y-2"},[t("svg",{class:"w-12 h-12 mx-auto opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})]),t("p",{class:"text-sm"},"Belum ada produk ditambahkan")])],-1)]))):D("",!0),(g(!0),p(V,null,U(i.value,(r,n)=>(g(),p("tr",{key:r.barcode,class:"hover:bg-gray-50 dark:hover:bg-gray-800/30 transition"},[t("td",ce,s(n+1),1),t("td",pe,[t("div",ye,s(r.nama_produk),1),t("div",me,s(r.barcode),1)]),t("td",be,[Q(t("input",{"onUpdate:modelValue":b=>r.qty=b,type:"number",min:"1",onChange:b=>_a(r.barcode,r.qty),class:"w-20 text-center text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-md px-2 py-2 text-sm bg-white dark:bg-gray-800 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition"},null,40,xe),[[ra,r.qty,void 0,{number:!0}]])]),t("td",ve,s(l(r.harga_jual_ritel)),1),t("td",fe,s(l(r.qty*r.harga_jual_ritel)),1),t("td",ke,[t("button",{type:"button",onClick:b=>aa(r.barcode),class:"text-gray-400 hover:text-red-600 dark:hover:text-red-500 p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition"},e[9]||(e[9]=[t("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,he)])]))),128))])])]),t("div",_e,[e[11]||(e[11]=t("span",{class:"text-base font-semibold text-gray-700 dark:text-gray-300"},"Total Belanja",-1)),t("span",we,s(l(_.value)),1)])]),t("div",Te,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[W(" Jumlah Bayar "),t("span",{class:"text-red-500"},"*")],-1)),t("div",je,[e[12]||(e[12]=t("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-semibold text-gray-500 dark:text-gray-400"}," Rp ",-1)),t("input",{value:L.value||y.value||"",onInput:pa,onFocus:ya,onBlur:ma,type:"text",required:"",placeholder:"0",class:"w-full h-12 pl-12 pr-4 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-lg font-semibold text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition"},null,40,Be)])]),t("div",Pe,[t("div",Ce,[e[14]||(e[14]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Hutang Lama:",-1)),t("span",{class:S(["font-semibold",h.value>0?"text-red-600 dark:text-red-500":"text-emerald-600 dark:text-emerald-500"])},s(l(h.value)),3)]),t("div",$e,[e[15]||(e[15]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Total Belanja:",-1)),t("span",Ie,s(l(_.value)),1)]),t("div",{class:S(["flex justify-between text-base font-bold border-t border-gray-200 dark:border-gray-700 pt-3",Y.value>0?"text-orange-600 dark:text-orange-500":"text-gray-900 dark:text-gray-100"])},[e[16]||(e[16]=t("span",null,"Total yang Harus Dibayar:",-1)),t("span",null,s(l(Y.value)),1)],2),t("div",De,[e[17]||(e[17]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Uang Bayar:",-1)),t("span",Se,s(l(y.value)),1)]),t("div",{class:S(["flex justify-between text-base border-t border-gray-200 dark:border-gray-700 pt-3 font-bold",P.value>=0?"text-emerald-600 dark:text-emerald-500":"text-red-600 dark:text-red-500"])},[t("span",null,s(P.value>=0?"Kembalian":"Sisa Hutang"),1),t("span",null,s(l(Math.abs(P.value))),1)],2)])]),t("div",Ae,[t("button",{type:"button",onClick:na(Ta,["prevent"]),disabled:i.value.length===0||!c.value,class:"h-12 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition"},e[18]||(e[18]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),W(" Simpan (Pending) ")]),8,Ne),t("button",{type:"submit",onClick:na(Ca,["prevent"]),disabled:N.value||_.value===0||!c.value,class:"md:col-span-2 h-12 bg-cyan-600 hover:bg-cyan-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white text-base font-semibold rounded-lg flex items-center justify-center gap-2 shadow-sm transition transform hover:scale-[1.01]"},[N.value?(g(),p("svg",Me,e[19]||(e[19]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):D("",!0),W(" "+s(N.value?"Memproses...":"Proses Transaksi"),1)],8,ze)])])]),_:1}))}});export{Le as default};
