import{j as N,r as d,o as V,b as n,a as H,w as L,d as t,f as v,e as c,q as w,h as j,F,t as i,x as G,p as _,v as T,i as I}from"./index-Bx8aesxF.js";import{a as k,S as l}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as U}from"./AdminLayout-OwvOUXMA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"space-y-6"},P={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},R={class:"max-w-full overflow-x-auto custom-scrollbar"},q={class:"min-w-full"},J={class:"divide-y divide-gray-200 dark:divide-gray-700"},K={key:0,class:"border-t border-gray-100 dark:border-gray-800"},O={key:1,class:"border-t border-gray-100 dark:border-gray-800"},Q={class:"px-5 py-4 sm:px-6"},W={class:"text-gray-800 text-theme-sm dark:text-white/90"},X={class:"px-5 py-4 sm:px-6"},Y={class:"text-gray-800 font-medium text-theme-sm dark:text-white/90"},Z={class:"px-5 py-4 sm:px-6"},tt={class:"text-gray-500 text-theme-sm dark:text-gray-400"},et={class:"px-5 py-4 sm:px-6"},at={class:"text-gray-500 text-theme-sm dark:text-gray-400"},rt={class:"px-5 py-4 sm:px-6"},st={class:"flex gap-2"},ot=["onClick"],lt=["onClick"],dt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},nt={class:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md p-6"},it={class:"flex items-center justify-between mb-4"},ct={class:"text-xl font-semibold text-gray-900 dark:text-white"},ut={class:"flex gap-3 pt-4"},mt=["disabled"],yt=N({__name:"TokoPage",setup(xt){const C=I(),u="https://alentest.my.id/pos",b=d([]),y=d(!1),m=d(!1),x=d(!1),g=d(!1),s=d({id:"",nama_toko:"",alamat:""}),p=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),h=async()=>{var r,e;y.value=!0;try{const a=await k.get(`${u}/toko`,{headers:p()});a.data.success&&(b.value=a.data.data)}catch(a){console.error("Fetch error:",a),l.fire({icon:"error",title:"Error",text:((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Gagal mengambil data toko"}),C.push("/signin")}finally{y.value=!1}},B=()=>{g.value=!1,s.value={id:"",nama_toko:"",alamat:""},x.value=!0},M=r=>{g.value=!0,s.value={id:r.id,nama_toko:r.nama_toko,alamat:r.alamat},x.value=!0},f=()=>{x.value=!1,s.value={id:"",nama_toko:"",alamat:""}},D=async()=>{var r,e;if(!s.value.nama_toko||!s.value.alamat){l.fire({icon:"warning",title:"Validasi Gagal",text:"Nama toko dan alamat harus diisi!"});return}m.value=!0;try{let a;g.value?a=await k.put(`${u}/toko/${s.value.id}`,{nama_toko:s.value.nama_toko,alamat:s.value.alamat},{headers:p()}):a=await k.post(`${u}/toko`,{nama_toko:s.value.nama_toko,alamat:s.value.alamat},{headers:p()}),a.data.success&&(await l.fire({icon:"success",title:"Berhasil",text:a.data.message,timer:1500}),f(),h())}catch(a){console.error("Submit error:",a),l.fire({icon:"error",title:"Error",text:((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Gagal menyimpan data toko"})}finally{m.value=!1}},S=r=>{l.fire({title:"Hapus Toko?",text:"Data toko akan dihapus secara permanen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&$(r)})},$=async r=>{var e,a;try{const o=await k.delete(`${u}/toko/${r}`,{headers:p()});o.data.success&&(await l.fire({icon:"success",title:"Berhasil",text:o.data.message,timer:1500}),h())}catch(o){console.error("Delete error:",o),l.fire({icon:"error",title:"Error",text:((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.message)||"Gagal menghapus toko"})}},E=r=>new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return V(()=>{h()}),(r,e)=>(n(),H(U,null,{default:L(()=>[t("div",z,[t("div",{class:"flex items-center justify-between"},[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-white"}," Daftar Toko ")],-1)),t("button",{onClick:B,class:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition"},e[2]||(e[2]=[t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 4V16M4 10H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),v(" Tambah Toko ")]))]),t("div",P,[t("div",R,[t("table",q,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"No")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Nama Toko")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Alamat")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Tanggal Dibuat ")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Aksi")])])],-1)),t("tbody",J,[y.value?(n(),c("tr",K,e[4]||(e[4]=[t("td",{colspan:"5",class:"px-5 py-4 text-center sm:px-6"},[t("p",{class:"text-gray-500"},"Memuat data...")],-1)]))):b.value.length===0?(n(),c("tr",O,e[5]||(e[5]=[t("td",{colspan:"5",class:"px-5 py-4 text-center sm:px-6"},[t("p",{class:"text-gray-500"},"Tidak ada data toko")],-1)]))):w("",!0),(n(!0),c(F,null,j(b.value,(a,o)=>(n(),c("tr",{key:a.id,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",Q,[t("p",W,i(o+1),1)]),t("td",X,[t("p",Y,i(a.nama_toko),1)]),t("td",Z,[t("p",tt,i(a.alamat),1)]),t("td",et,[t("p",at,i(E(a.createdAt)),1)]),t("td",rt,[t("div",st,[t("button",{onClick:A=>M(a),class:"px-3 py-1 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 dark:bg-blue-500/15 dark:text-blue-400 transition"}," Edit ",8,ot),t("button",{onClick:A=>S(a.id),class:"px-3 py-1 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 dark:bg-red-500/15 dark:text-red-400 transition"}," Hapus ",8,lt)])])]))),128))])])])]),x.value?(n(),c("div",dt,[t("div",nt,[t("div",it,[t("h2",ct,i(g.value?"Edit Toko":"Tambah Toko"),1),t("button",{onClick:f,class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},e[7]||(e[7]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),t("form",{onSubmit:G(D,["prevent"]),class:"space-y-4"},[t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[v(" Nama Toko"),t("span",{class:"text-red-500"},"*")],-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.nama_toko=a),type:"text",placeholder:"Masukkan nama toko",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[T,s.value.nama_toko]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[v(" Alamat"),t("span",{class:"text-red-500"},"*")],-1)),_(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.alamat=a),placeholder:"Masukkan alamat toko",rows:"3",class:"dark:bg-dark-900 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[T,s.value.alamat]])]),t("div",ut,[t("button",{type:"button",onClick:f,class:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 transition"}," Batal "),t("button",{type:"submit",disabled:m.value,class:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},i(m.value?"Menyimpan...":"Simpan"),9,mt)])],32)])])):w("",!0)])]),_:1}))}});export{yt as default};
