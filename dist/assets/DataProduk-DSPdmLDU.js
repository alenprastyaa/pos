import{j as ye,r as i,y as V,c as we,o as je,A as le,b as p,a as Be,w as Pe,d as t,f as x,t as d,p as C,v as $,e as c,q as w,h as X,F as Y,x as oe,z as re,i as Ce}from"./index-Bx8aesxF.js";import{a as j,S as m}from"./sweetalert2.esm.all-BgBW3QO9.js";import{_ as Fe}from"./AdminLayout-OwvOUXMA.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Me={class:"space-y-6"},De={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-3"},Ie=["disabled"],Ue={class:"flex gap-4"},Se={class:"flex-1"},Ve={class:"card-container overflow-hidden rounded-xl border"},$e={class:"max-w-full overflow-x-auto"},Ae={class:"min-w-full divide-y divide-border"},He={class:"table-header border-b border-divider"},Ne={key:0,class:"px-5 py-3 text-left sm:px-6"},Re={class:"divide-y divide-border bg-white"},qe={key:0,class:"border-t border-divider"},Ge=["colspan"],Le={key:1,class:"border-t border-divider"},Je=["colspan"],ze={class:"px-5 py-3 sm:px-6"},Ke={class:"text-body text-sm"},Qe={class:"px-5 py-3 sm:px-6"},Oe={class:"text-body font-medium text-sm"},We={class:"px-5 py-3 sm:px-6"},Xe={class:"text-muted text-sm"},Ye={class:"px-5 py-3 sm:px-6"},Ze={class:"text-body text-sm"},et={class:"px-5 py-3 sm:px-6"},tt={class:"text-body text-sm"},at={class:"px-5 py-3 sm:px-6"},st={class:"text-body text-sm"},lt={class:"px-5 py-3 sm:px-6"},ot={class:"text-body text-sm"},rt={key:0,class:"px-5 py-3 sm:px-6"},nt={class:"text-muted text-sm"},it={class:"px-5 py-3 sm:px-6"},ut={class:"flex gap-2"},dt=["onClick"],pt=["onClick"],ct={class:"flex items-center justify-between p-4 border-t border-divider bg-subtle"},mt={class:"text-sm text-muted"},vt={key:0,class:"flex items-center space-x-2"},xt=["disabled"],gt={class:"text-sm text-body"},ft=["disabled"],bt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center modal-overlay"},_t={class:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 relative"},ht={class:"flex items-center justify-between mb-4 border-b border-divider pb-3"},kt={class:"text-xl font-semibold text-title"},yt=["disabled"],wt={class:"grid grid-cols-3 gap-4"},jt=["value"],Bt=["value"],Pt=["value"],Ct={key:0,class:"pt-2"},Ft=["value"],Tt={key:0,class:"text-xs text-muted mt-1"},Mt={class:"flex gap-3 pt-4 border-t border-divider mt-4"},Dt=["disabled"],Et={key:1,class:"fixed inset-0 z-50 flex items-center justify-center modal-overlay backdrop-blur-sm"},It={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative"},Ut={key:0,class:"pt-2"},St=["value"],Vt={key:1,class:"pt-2"},$t={class:"text-sm text-muted"},At={class:"font-semibold text-title"},Ht={class:"flex gap-3 pt-4 border-t border-divider mt-4"},Nt=["disabled"],Rt=ye({__name:"DataProduk",setup(qt){const ne=Ce(),_="https://alentest.my.id/pos",b=i(null),F=i([]),B=i([]),A=i(!1),H=i(!1),E=i(!1),T=i(!1),v=i(!1),N=i(""),R=i(""),Z=i(null);V(()=>T.value,a=>{a&&!v.value&&le(()=>{var e;(e=Z.value)==null||e.focus()})});const n=i({total:0,current_page:1,per_page:10,total_pages:1}),q={nama_produk:"",barcode:"",stok_produk:0,harga_beli:0,harga_jual_ritel:0,harga_jual_biasa:0,toko_id:""},l=i({...q}),I=i(!1),G=i(!1),U=i(!1),M=i(null),P=i(null),h=i(""),u=we(()=>{var a;return((a=b.value)==null?void 0:a.role_name)==="superadmin"}),ee=(a,e)=>{let o;return function(...s){clearTimeout(o),o=setTimeout(()=>{a.apply(this,s)},e)}},k=()=>({Authorization:`Bearer ${localStorage.getItem("authToken")}`}),L=a=>{if(a==null)return"Rp 0";const e=typeof a=="string"?parseFloat(a):a;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},ie=async()=>{try{const a=await j.get(`${_}/user/my/data`,{headers:k()});a.data.success&&(b.value=a.data.data)}catch(a){console.error("Fetch user data error:",a)}},J=async()=>{H.value=!0;try{const a=await j.get(`${_}/toko`,{headers:k()});a.data.success&&(B.value=a.data.data)}catch(a){console.error("Fetch Toko error:",a)}finally{H.value=!1}},y=async()=>{var a,e;A.value=!0;try{const o={page:n.value.current_page,per_page:n.value.per_page,search:N.value};u.value&&R.value&&(o.toko_id=R.value);const s=await j.get(`${_}/produk`,{params:o,headers:k()});if(s.data.success&&s.data.data){const r=s.data.data;F.value=r.data,n.value={total:r.total,current_page:r.current_page,per_page:r.per_page,total_pages:r.total_pages}}else F.value=[],n.value={total:0,current_page:1,per_page:n.value.per_page,total_pages:1}}catch(o){console.error("Fetch Product error:",o),m.fire({icon:"error",title:"Error",text:((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal mengambil data produk"}),ne.push("/signin")}finally{A.value=!1}},te=a=>{a>0&&a<=n.value.total_pages&&(n.value.current_page=a,y())},ue=ee(()=>{n.value.current_page=1,y()},300),de=async()=>{var a;v.value=!1,l.value={...q},u.value&&B.value.length===0&&await J(),!u.value&&((a=b.value)!=null&&a.toko_id)&&(l.value.toko_id=b.value.toko_id),T.value=!0},pe=a=>{v.value=!0,l.value={id:a.id,nama_produk:a.nama_produk,barcode:a.barcode,stok_produk:a.stok_produk,harga_beli:parseFloat(a.harga_beli),harga_jual_ritel:parseFloat(a.harga_jual_ritel),harga_jual_biasa:parseFloat(a.harga_jual_biasa)},T.value=!0},z=()=>{T.value=!1,l.value={...q},v.value=!1},ce=()=>{var e;const a=l.value;return!a.nama_produk||!a.barcode?"Nama produk dan Barcode wajib diisi.":a.stok_produk<0?"Stok tidak boleh negatif.":a.harga_beli<=0||a.harga_jual_ritel<=0||a.harga_jual_biasa<=0?"Semua harga harus bernilai positif (> 0).":!v.value&&u.value&&!a.toko_id?"Toko tujuan wajib dipilih untuk produk baru oleh Super Admin.":!v.value&&!u.value&&!((e=b.value)!=null&&e.toko_id)?"Gagal menentukan toko Anda. Coba muat ulang halaman.":null},me=async()=>{var o,s,r;const a=ce();if(a){m.fire({icon:"warning",title:"Validasi Gagal",text:a});return}E.value=!0;const e={nama_produk:l.value.nama_produk,barcode:l.value.barcode,stok_produk:l.value.stok_produk,harga_beli:l.value.harga_beli,harga_jual_ritel:l.value.harga_jual_ritel,harga_jual_biasa:l.value.harga_jual_biasa};v.value||(u.value&&l.value.toko_id?e.toko_id=l.value.toko_id:!u.value&&((o=b.value)!=null&&o.toko_id)&&(e.toko_id=b.value.toko_id));try{let g,f=`${_}/produk`;v.value?(f=`${_}/produk/${l.value.id}`,g=await j.put(f,e,{headers:k()})):g=await j.post(f,e,{headers:k()}),g.data.success&&(await m.fire({icon:"success",title:"Berhasil",text:g.data.message||`Produk berhasil di${v.value?"ubah":"tambah"}`,timer:1500}),z(),y())}catch(g){console.error("Submit error:",g),m.fire({icon:"error",title:`Error ${v.value?"Update":"Tambah"}`,text:((r=(s=g.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal menyimpan data produk"})}finally{E.value=!1}},ve=a=>{m.fire({title:"Hapus Produk?",text:"Data produk akan dihapus secara permanen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&xe(a)})},xe=async a=>{var e,o;try{const s=await j.delete(`${_}/produk/${a}`,{headers:k()});s.data.success&&(await m.fire({icon:"success",title:"Berhasil",text:s.data.message||"Produk berhasil dihapus",timer:1500}),y())}catch(s){console.error("Delete error:",s),m.fire({icon:"error",title:"Error",text:((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Gagal menghapus produk"})}},ge=async()=>{var a,e,o;I.value=!0;try{const s=await j.get(`${_}/produk/download/excel`,{headers:k()});if(s.data.success&&((a=s.data.data)!=null&&a.path)){const r=s.data.data.path,g=s.data.data.originalName||"products.xlsx",f=document.createElement("a");f.href=r,f.setAttribute("download",g),document.body.appendChild(f),f.click(),document.body.removeChild(f),m.fire("Berhasil","File Excel berhasil dibuat dan akan diunduh.","success")}else throw new Error("Respons tidak valid atau path download tidak ditemukan.")}catch(s){console.error("Download error:",s),m.fire("Error",((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Gagal mendownload file Excel produk.","error")}finally{I.value=!1}},fe=async()=>{var a;P.value=null,M.value&&(M.value.value=""),u.value&&B.value.length===0&&await J(),u.value&&B.value.length>0&&(h.value=B.value[0].id),!u.value&&((a=b.value)!=null&&a.toko_id)&&(h.value=b.value.toko_id),G.value=!0},K=()=>{G.value=!1,P.value=null,M.value&&(M.value.value=""),h.value=""},be=a=>{const e=a.target;e.files&&e.files.length>0?P.value=e.files[0]:P.value=null},_e=async()=>{var e,o,s;if(!P.value){m.fire("Peringatan","Mohon pilih file Excel untuk diunggah.","warning");return}if(u.value&&!h.value){m.fire("Peringatan","Super Admin wajib memilih Toko Tujuan.","warning");return}if(!u.value&&!((e=b.value)!=null&&e.toko_id)){m.fire("Error","Data toko Anda tidak termuat. Coba muat ulang halaman.","error");return}U.value=!0;const a=new FormData;a.append("file",P.value),h.value&&a.append("toko_id",h.value);try{const r=await j.post(`${_}/produk/excel/upload-excel`,a,{headers:{...k(),"Content-Type":"multipart/form-data"}});if(r.data.success)await m.fire({icon:"success",title:"Upload Berhasil",text:r.data.message||"Produk berhasil diunggah dari Excel.",timer:2e3}),K(),y();else throw new Error(r.data.message||"Terjadi kesalahan saat mengunggah file.")}catch(r){console.error("Upload error:",r),m.fire({icon:"error",title:"Upload Gagal",text:((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.message)||"Gagal mengunggah file Excel produk."})}finally{U.value=!1}};V(N,()=>{ue()},{immediate:!1}),V(R,()=>{n.value.current_page=1,y()},{immediate:!1});const D=a=>{if(!a)return"";const e=typeof a=="string"?parseFloat(a.replace(/\D/g,"")):a;return isNaN(e)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},ae=a=>{const e=parseInt(a.replace(/\D/g,""),10);return isNaN(e)?0:e},Q=(a,e)=>{const o=a.target,s=o.value.replace(/\D/g,""),r=parseInt(s,10)||0;e==="harga_beli"?l.value.harga_beli=r:e==="harga_jual_ritel"?l.value.harga_jual_ritel=r:e==="harga_jual_biasa"&&(l.value.harga_jual_biasa=r),o.value=r>0?D(r):""},O=(a,e)=>{const o=a.target,s=ae(o.value);e==="harga_beli"?l.value.harga_beli=s:e==="harga_jual_ritel"?l.value.harga_jual_ritel=s:e==="harga_jual_biasa"&&(l.value.harga_jual_biasa=s),o.value=s>0?D(s):""},W=a=>{const e=a.target,o=ae(e.value);e.value=o.toString()},S=i(""),se=i(null);V(S,()=>{n.value.current_page=1,he()},{immediate:!1});const he=ee(()=>{N.value=S.value,y()},500);return je(async()=>{await ie(),u.value&&await J(),await y(),le(()=>{var a;(a=se.value)==null||a.focus()})}),(a,e)=>(p(),Be(Fe,null,{default:Pe(()=>{var o;return[t("div",Me,[t("div",De,[e[17]||(e[17]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-title"}," Data Produk "),t("p",{class:"text-subtitle"}," Kelola inventaris produk dan harga di semua toko. ")],-1)),t("div",Ee,[t("button",{onClick:ge,class:"btn-secondary-blue flex items-center gap-2 px-4 py-2 rounded-lg transition",disabled:I.value},[e[14]||(e[14]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),x(" "+d(I.value?"Mempersiapkan...":"Download Excel"),1)],8,Ie),t("button",{onClick:fe,class:"btn-secondary-emerald flex items-center gap-2 px-4 py-2 rounded-lg transition"},e[15]||(e[15]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),x(" Upload Excel ")])),t("button",{onClick:de,class:"btn-primary flex items-center gap-2 px-4 py-2 rounded-lg transition"},e[16]||(e[16]=[t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 4V16M4 10H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),x(" Tambah Produk ")]))])]),t("div",Ue,[t("div",Se,[C(t("input",{ref_key:"barcodeInputFocus",ref:se,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),type:"text",placeholder:"Cari produk (nama/barcode)...",class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm shadow-sm focus:outline-none"},null,512),[[$,S.value]])])]),t("div",Ve,[t("div",$e,[t("table",Ae,[t("thead",null,[t("tr",He,[e[19]||(e[19]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"No")],-1)),e[20]||(e[20]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Nama Produk")],-1)),e[21]||(e[21]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Barcode")],-1)),e[22]||(e[22]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Stok")],-1)),e[23]||(e[23]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Harga Beli")],-1)),e[24]||(e[24]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Harga Jual Ritel ")],-1)),e[25]||(e[25]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Harga Jual Biasa ")],-1)),u.value?(p(),c("th",Ne,e[18]||(e[18]=[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Toko",-1)]))):w("",!0),e[26]||(e[26]=t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-xs uppercase tracking-wider th-text"},"Aksi")],-1))])]),t("tbody",Re,[A.value?(p(),c("tr",qe,[t("td",{colspan:u.value?9:8,class:"px-5 py-4 text-center sm:px-6"},e[27]||(e[27]=[t("p",{class:"text-muted"},"Memuat data...",-1)]),8,Ge)])):F.value.length===0?(p(),c("tr",Le,[t("td",{colspan:u.value?9:8,class:"px-5 py-4 text-center sm:px-6"},e[28]||(e[28]=[t("p",{class:"text-muted"},"Tidak ada data produk",-1)]),8,Je)])):w("",!0),(p(!0),c(Y,null,X(F.value,(s,r)=>{var g,f;return p(),c("tr",{key:s.id,class:"border-t border-divider row-hover"},[t("td",ze,[t("p",Ke,d((n.value.current_page-1)*n.value.per_page+r+1),1)]),t("td",Qe,[t("p",Oe,d(s.nama_produk),1)]),t("td",We,[t("p",Xe,d(s.barcode),1)]),t("td",Ye,[t("p",Ze,d(s.stok_produk),1)]),t("td",et,[t("p",tt,d(L(s.harga_beli)),1)]),t("td",at,[t("p",st,d(L(s.harga_jual_ritel)),1)]),t("td",lt,[t("p",ot,d(L(s.harga_jual_biasa)),1)]),u.value?(p(),c("td",rt,[t("p",nt,d(((f=(g=s.user)==null?void 0:g.toko)==null?void 0:f.nama_toko)||"N/A"),1)])):w("",!0),t("td",it,[t("div",ut,[t("button",{onClick:ke=>pe(s),class:"btn-icon-blue px-3 py-1 rounded-lg transition text-sm"}," Edit ",8,dt),t("button",{onClick:ke=>ve(s.id),class:"btn-icon-red px-3 py-1 rounded-lg transition text-sm"}," Hapus ",8,pt)])])])}),128))])])]),t("div",ct,[t("p",mt," Menampilkan "+d(F.value.length)+" dari "+d(n.value.total)+" data. ",1),n.value.total_pages>1?(p(),c("div",vt,[t("button",{onClick:e[1]||(e[1]=s=>te(n.value.current_page-1)),disabled:n.value.current_page===1,class:"btn-pagination px-3 py-1 text-sm rounded-lg border transition"}," Sebelumnya ",8,xt),t("span",gt," Halaman "+d(n.value.current_page)+" dari "+d(n.value.total_pages),1),t("button",{onClick:e[2]||(e[2]=s=>te(n.value.current_page+1)),disabled:n.value.current_page===n.value.total_pages,class:"btn-pagination px-3 py-1 text-sm rounded-lg border transition"}," Berikutnya ",8,ft)])):w("",!0)])]),T.value?(p(),c("div",bt,[t("div",_t,[t("div",ht,[t("h2",kt,d(v.value?"Edit Produk":"Tambah Produk Baru"),1),t("button",{onClick:z,class:"btn-close"},e[29]||(e[29]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),t("form",{onSubmit:oe(me,["prevent"]),class:"space-y-4"},[t("div",null,[e[30]||(e[30]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Barcode"),t("span",{class:"text-danger"},"*")],-1)),C(t("input",{ref_key:"barcodeInput",ref:Z,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.barcode=s),type:"text",placeholder:"Masukkan barcode",required:"",disabled:v.value,class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,8,yt),[[$,l.value.barcode]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Nama Produk"),t("span",{class:"text-danger"},"*")],-1)),C(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.nama_produk=s),type:"text",placeholder:"Masukkan nama produk",required:"",class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,512),[[$,l.value.nama_produk]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Stok Produk"),t("span",{class:"text-danger"},"*")],-1)),C(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.stok_produk=s),type:"number",min:"0",placeholder:"Stok awal",required:"",class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,512),[[$,l.value.stok_produk,void 0,{number:!0}]])]),t("div",wt,[t("div",null,[e[33]||(e[33]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Harga Beli"),t("span",{class:"text-danger"},"*")],-1)),t("input",{type:"text",placeholder:"Harga Beli",required:"",value:l.value.harga_beli>0?D(l.value.harga_beli):"",onInput:e[6]||(e[6]=s=>Q(s,"harga_beli")),onFocus:W,onBlur:e[7]||(e[7]=s=>O(s,"harga_beli")),class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,40,jt)]),t("div",null,[e[34]||(e[34]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Jual Ritel"),t("span",{class:"text-danger"},"*")],-1)),t("input",{type:"text",placeholder:"Harga Jual Ritel",required:"",value:l.value.harga_jual_ritel>0?D(l.value.harga_jual_ritel):"",onInput:e[8]||(e[8]=s=>Q(s,"harga_jual_ritel")),onFocus:W,onBlur:e[9]||(e[9]=s=>O(s,"harga_jual_ritel")),class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,40,Bt)]),t("div",null,[e[35]||(e[35]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Jual Biasa"),t("span",{class:"text-danger"},"*")],-1)),t("input",{type:"text",placeholder:"Harga Jual Biasa",required:"",value:l.value.harga_jual_biasa>0?D(l.value.harga_jual_biasa):"",onInput:e[10]||(e[10]=s=>Q(s,"harga_jual_biasa")),onFocus:W,onBlur:e[11]||(e[11]=s=>O(s,"harga_jual_biasa")),class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm"},null,40,Pt)])]),u.value&&!v.value?(p(),c("div",Ct,[e[37]||(e[37]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Toko Tujuan"),t("span",{class:"text-danger"},"*")],-1)),C(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.toko_id=s),required:"",class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm bg-white"},[e[36]||(e[36]=t("option",{value:"",disabled:""},"Pilih Toko",-1)),(p(!0),c(Y,null,X(B.value,s=>(p(),c("option",{key:s.id,value:s.id},d(s.nama_toko),9,Ft))),128))],512),[[re,l.value.toko_id]]),H.value?(p(),c("p",Tt,"Memuat data toko...")):w("",!0)])):w("",!0),t("div",Mt,[t("button",{type:"button",onClick:z,class:"btn-cancel flex-1 px-4 py-2 rounded-lg transition"}," Batal "),t("button",{type:"submit",disabled:E.value,class:"btn-primary flex-1 px-4 py-2 rounded-lg transition disabled:opacity-50"},d(E.value?"Menyimpan...":"Simpan"),9,Dt)])],32)])])):w("",!0),G.value?(p(),c("div",Et,[t("div",It,[t("div",{class:"flex items-center justify-between mb-4 border-b border-divider pb-3"},[e[39]||(e[39]=t("h2",{class:"text-xl font-semibold text-title"}," Upload Produk via Excel ",-1)),t("button",{onClick:K,class:"btn-close"},e[38]||(e[38]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))]),t("form",{onSubmit:oe(_e,["prevent"]),class:"space-y-4"},[t("div",null,[e[40]||(e[40]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Pilih File (.xlsx)"),t("span",{class:"text-danger"},"*")],-1)),t("input",{type:"file",ref_key:"fileInput",ref:M,onChange:be,accept:".xlsx, .xls",required:"",class:"input-field input-file w-full text-sm rounded-lg cursor-pointer focus:outline-none"},null,544),e[41]||(e[41]=t("p",{class:"mt-1 text-sm text-muted"}," **Pastikan format header kolom sesuai dengan template.** ",-1))]),u.value?(p(),c("div",Ut,[e[43]||(e[43]=t("label",{class:"mb-1.5 block text-sm font-medium text-body"},[x(" Toko Tujuan Upload"),t("span",{class:"text-danger"},"*")],-1)),C(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>h.value=s),required:"",class:"input-field h-11 w-full rounded-lg px-4 py-2.5 text-sm bg-white"},[e[42]||(e[42]=t("option",{value:"",disabled:""},"Pilih Toko",-1)),(p(!0),c(Y,null,X(B.value,s=>(p(),c("option",{key:s.id,value:s.id},d(s.nama_toko),9,St))),128))],512),[[re,h.value]])])):(p(),c("div",Vt,[t("p",$t,[e[44]||(e[44]=x("Produk akan diupload ke toko Anda: ")),t("span",At,d(((o=b.value)==null?void 0:o.toko.nama_toko)||"Memuat..."),1)])])),t("div",Ht,[t("button",{type:"button",onClick:K,class:"btn-cancel flex-1 px-4 py-2 rounded-lg transition"}," Batal "),t("button",{type:"submit",disabled:U.value||!P.value,class:"btn-secondary-emerald flex-1 px-4 py-2 rounded-lg transition disabled:opacity-50"},d(U.value?"Mengunggah...":"Upload Data"),9,Nt)])],32)])])):w("",!0)])]}),_:1}))}}),Kt=Te(Rt,[["__scopeId","data-v-119caca6"]]);export{Kt as default};
